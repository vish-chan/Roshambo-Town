(window.webpackJsonpbeastsite=window.webpackJsonpbeastsite||[]).push([[0],{27:function(e,t,a){e.exports=a(47)},32:function(e,t,a){},38:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),i=a.n(o),l=(a(32),a(33),a(9)),s=(a(38),a(1)),c=a(3),p=a(4),u=a(7),d=a(5),h=a(8),m=a(6),b=a(16),y="ADD_MAP",f="LEFT",g="RIGHT",v="UP",w="DOWN",k=37,O=38,E=39,I=40,A=[37,38,39,40],T=[32],D=[80],S=[73],j=[27],P=A.concat(T,D,S,j),_=["HEALER","EATABLE","CURRENCY"],N="BOSS",x="GANG_MEMBER",L="SAVED GAME",R={L1:"MediumSeaGreen",L2:"RoyalBlue",L3:"Turquoise",L4:"darkorange",L5:"red",L6:"gold"},C="".concat("assets","/audio"),M="".concat("assets","/images"),W="".concat(M,"/maps"),G="".concat(M,"/80/characters"),Y="".concat(M,"/80/objectsAndProps"),F="".concat(C,"/effects/drip.wav"),H="".concat(C,"/effects/beep.wav"),B="".concat(C,"/effects/beep2.wav"),U="".concat(C,"/effects/beep3.wav"),z="".concat(C,"/effects/longbeep.wav"),J="".concat(C,"/effects/getcoin.wav"),$="".concat(C,"/effects/laser.wav"),K="".concat(C,"/MainMenu.mp3"),V="".concat(C,"/TownCenter.mp3"),X="".concat(C,"/TownSouth.mp3"),q="".concat(C,"/TownSouth.mp3"),Q="".concat(C,"/Home.mp3"),Z="".concat(C,"/Bakery.mp3"),ee="".concat(C,"/Hotel.mp3"),te="".concat(C,"/Library.mp3"),ae="".concat(C,"/GameRoom.mp3"),ne="".concat(C,"/Cave.mp3"),re="".concat(C,"/Hell.mp3"),oe="".concat(C,"/Battle.mp3"),ie="".concat(C,"/BattleBoss.mp3"),le="".concat(C,"/BattleGangMember.mp3"),se="".concat(C,"/BattleEnd.mp3"),ce=10,pe=function(e,t){var a=[960,1200,1440],n=[640,720,800],r=[];return e<1200?(r[0]=a[0],ce=8):e<1440?(r[0]=a[1],ce=9):(r[0]=a[2],ce=10),t<720?(r[1]=n[0],ce=Math.min(ce,8)):t<800?(r[1]=n[1],ce=Math.min(ce,9)):(r[1]=n[2],ce=Math.min(ce,10)),r},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return ce*e},de=function(e,t){return[e[0]+t[0],e[1]+t[1]]},he=function(e,t){return[e[1]*t,e[0]*t]},me=function(e,t){return[e[1]/t,e[0]/t]},be={},ye=function(e,t,a){var n=setInterval(e,t);be["_"+a]=n},fe=function(){for(var e=Object.keys(be),t=0;t<e.length;t++)clearInterval(be[e[t]]),delete be[e[t]]},ge={},ve=function(e,t,a){var n=setTimeout(e,t);ge["_"+a]=n},we=function(e,t){return null!=t?t:e},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"contain";return{backgroundColor:t,backgroundImage:"url('".concat(e,"')"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:a}},Oe=function(e,t,a){return{border:"".concat(e,"px solid ").concat(t),borderRadius:"".concat(a,"px")}},Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue(1.5);return r.a.createElement("div",{style:{padding:"3px",border:"1px inset grey",borderRadius:"5px",backgroundColor:"white",display:"inline-block",fontSize:"".concat(t,"px"),color:"#5d5f5b"}},r.a.createElement("div",{style:{backgroundColor:"lightgrey"}},e))},Ie=function(e){return e<1||e>6?"white":R["L".concat(e)]},Ae=function(e){return e<25?"Red":e<50?"Crimson":e<75?"SpringGreen":"ForestGreen"},Te=function(e){new Audio(e).play()},De={Frank:{follows:["Hey Frank! I'm great.","I'm a bit busy with my engineering exams. What about you?","Oh wow! That's awesome.","Ohh, thanks for informing :). I'll probably go now.","BBye, Takecare."],starts:["Hey! Whatsup!"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Dad:{follows:["It feels great to be back home. You look worried dad. Is everything fine?","Yeah! The town seems a bit different. Someone refused to play Roshambo with me coz I was not on his level! I didn't get it.","Markov tribe? That's an interesting name. And what are the new rules?","And...","Okay! Now I get it. But this isn't great for our town. We always had a 'free Roshambo for all' motto.","How can we do that?","I can do that dad. But I need some practice.","Okay dad! I'll go and practice now. Big task ahead.","Even I missed him. I'll surely play with him.","Thats amazing! I'll grab an Eclair from there."],starts:["Hey Dad! Whatsup?"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Joey:{follows:[],starts:[],battleAccept:["Okay Joey. Let's battle!"],battleAsk:["Hey Joey! you wanna play?"],battleWin:["Nevermind...."],battleLose:["I always let you win."]},Ace:{follows:["I missed you too....."],starts:["Ace!! Come here...."],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Tia:{follows:["Hey Tia! I'm great. Came here to get some eclairs.","Why so? I see the bakery is open.","Its not their bakery! why are we being forced to battle him?","Okay, I'll go inside and defeat him.","Sure, I'll do that. See you!"],starts:["Hey Tia! Whatsup?"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Nathan:{follows:[],starts:[],battleAccept:["Yeah sure, lets go!"],battleAsk:["Hey! do you wanna battle?"],battleWin:["Thanks mate!"],battleLose:["I'll be back in no time. See you then."]},John:{follows:[],starts:[],battleAccept:["Yeah sure, lets go!"],battleAsk:["Hey! do you wanna battle?"],battleWin:["Thanks mate!"],battleLose:["I'll be back in no time. See you then."]},Samantha:{follows:[],starts:[],battleAccept:["Yeah sure, who doesn't like a freebie ;)"],battleAsk:["Hey! do you wanna battle?"],battleWin:["Thanks! I think I am ready to defeat him.","Great! Now I have 2 reasons to defeat him haha."],battleLose:["I'll be back in no time. See you then."]},Eden:{follows:[],starts:[],battleAccept:["I'm $PLAYERNAME. I'm not new, you are new here. Btw, I came here for an eclair.","Really? I thought I need to have a Roshambo battle with you. Guess you are not that bad.","And I thought for a moment that the tribe isn't that bad. Nevertheless, I can defeat you, pretty easily.","Yup, lets go!!!"],battleAsk:["I want to challenge you for a battle!"],battleWin:["I'll take care of your boss later. I need my eclair now. Step aside.","But you said so. And I believed you!","F*** man. What else can I expect from the tribe! Where can I find your boss?","Ughhhhhh."],battleLose:["I'll be back in no time. "]},Tracer:{follows:["Hey Tracer. I'm looking for the tribe boss. Do you know where he lives?","North? How do you know?","And I'm John Snow. Stop joking. Are you sure about this info?","No... sadly :( I'll probably go to the north.","Thanks :) Hopefully."],starts:["Hey Tracer! Whatsup?"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Sean:{follows:["Hey Sean. I'm great. Hows your business?","Why? What happened?","Tell me!","Who is Gambit? Why didn't you call police for help?","I knew it. A tribe member doing what tribe members do best, bully others. I'll teach him a lesson by defeating him in a Roshambo battle.","Don't decide the winner before the battle. Atleast I want to try.","Yup, I will. Thanks."],starts:["Hey Sean! Whatsup?"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Gambit:{follows:[],starts:[],battleAccept:["No, this isn't your property. This is my friend Sean's property.","I've got big hands as well. I challenge you for a Roshambo battle.","One tribe defeated is one tribe less. Lets go"],battleAsk:["I want to challenge you for a battle!"],battleWin:["Not for long. I'll soon defeat your boss."],battleLose:["I'm pretty sure you cheated. I'll be back."]},Chop:{follows:[],starts:[],battleAccept:["Do I have a choice?"],battleAsk:["Do you wanna battle?"],battleWin:["You are pretty good. I got lucky."],battleLose:["No! I underestimated you. See you next time."]},Molly:{follows:["Hey Molly. Why are you outside the library?","Have they occupied the library as well? I thought its just the bakery and the chinese van.","Don't worry. I'll soon defeat their boss.","Really! I didn't know that. I should go inside and battle them. Wish me luck.","Thanks!"],starts:["Hey Molly! Whatsup?"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Jordan:{follows:[],starts:[],battleAccept:["Yeah sure, lets go!"],battleAsk:["Hey! do you wanna battle?"],battleWin:["Thanks mate!"],battleLose:["I'll be back in no time. See you then."]},Grindel:{follows:[],starts:[],battleAccept:["Do I have a choice?"],battleAsk:["Do you wanna battle?"],battleWin:["You are pretty good. I got lucky."],battleLose:["No! I underestimated you. See you next time."]},Tori:{follows:[],starts:[],battleAccept:["Definitely! I need to practice as well."],battleAsk:["Do you wanna battle?"],battleWin:["Losers will be losers"],battleLose:["I underestimated you. See you next time."]},Ghissu:{follows:["Hey Ghissu. Done with all the ghisai?","Molly told me the tribe has occupied the library as well. I'm looking for them.","Atleast you have a source of entertainment now. Haha. Jokes aside, where are they?","I should have known. Thanks! See you after the battle.","Haha. Bbye."],starts:["Hey Ghissu! Whatsup?"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Razor:{follows:[],starts:[],battleAccept:["Its a public TV, you can't watch something private here.","Not for long. Soon I'll defeat your boss.","You stole words from my mouth. I accept the challenge.","Stop talking and start battling!"],battleAsk:["I want to challenge you for a battle!"],battleWin:["Not for long. I'll soon defeat your boss."],battleLose:["I'm pretty sure you cheated.","I'll be back in no time."]},Prick:{follows:[],starts:[],battleAccept:["Definitely! I need to practice as well."],battleAsk:["Do you wanna battle?"],battleWin:["Losers will be losers"],battleLose:["I underestimated you. See you next time."]},LT:{follows:["Okay... I get it."],starts:["Hey! Can I play?"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Rose:{follows:["Are they tribe members?","As expected. Okay, I'll try to get her back.","No problem."],starts:["Hey! Did you get sparkle back?"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Snyder:{follows:[],starts:[],battleAccept:["Stop disturbing the dog. Leave her alone!","Just like I'll teach your boss a lesson?","I'll soon defeat him in Roshambo. But, let me defeat you first!","If I win, you free the dog!","Challenge accepted!"],battleAsk:["I want to challenge you for a battle."],battleWin:["Not for long. I'll soon defeat your boss."],battleLose:["I'm pretty sure you cheated.","I'll be back in no time."]},Kaloo:{follows:["Okay...."],starts:["Awwww......kaloooooo."],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Goku:{follows:["Nevermind...."],starts:["Awwww......cutie. Come here....."],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Misty:{follows:["Nevermind...."],starts:["Awwww....Come here....."],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Trigger:{follows:["Nevermind...."],starts:["Awwww......cutie. Come here....."],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Max:{follows:[],starts:[],battleAccept:["Definitely! I need to practice as well."],battleAsk:["Do you wanna battle?"],battleWin:["Losers will be losers"],battleLose:["You got real skills mate!"]},Maty:{follows:["Hey Maty! Yeah. How have you been?","On my quest to defeat the tribe boss.","Thanks :)! I should go and defeat him.","Hehe. Thanks!"],starts:["Hey Maty!"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Damon:{follows:[],starts:[],battleAccept:["Do I have a choice?"],battleAsk:["Do you wanna battle?"],battleWin:["You are pretty good. I got lucky."],battleLose:["No! I underestimated you. See you next time."]},Tegan:{follows:[],starts:[],battleAccept:["No! I was looking for you.","So that I can defeat you first, before your boss!","Challenge accepted! Let me throw you out of our town haha."],battleAsk:["I want to challenge you for a battle!"],battleWin:["Not for long. I'll soon defeat your boss."],battleLose:["I'm pretty sure you cheated.","I'll be back in no time."]},Hunt:{follows:[],starts:[],battleAccept:["Do I have a choice?"],battleAsk:["Do you wanna battle?"],battleWin:["You are pretty good. I got lucky."],battleLose:["No! I underestimated you. See you next time."]},Fattu:{follows:["Why? The tribe boss isn't inside?","She!??! WTF. I'm going in.","Don't worry about me."],starts:["Hey Fattu!"],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Rock:{follows:["Nevermind...."],starts:["Awwww......cutie. Come here....."],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Paper:{follows:["Nevermind...."],starts:["Awwww......cutie. Come here....."],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Scissors:{follows:["Nevermind...."],starts:["Awwww......cutie. Come here....."],battleAccept:[],battleAsk:[],battleWin:[],battleLose:[]},Beast:{follows:[],starts:[],battleAccept:["Looking for the tribe boss. I want to battle her in Roshambo. Do you where is she?","Ohh, my bad. How can I miss the biggest clue lol. Btw I'm $PLAYERNAME. I came here to challenge you for a Roshambo battle.","There can be, like petting your cute cats.","Yeah, they don't seem friendly, just like you.","Yeah! Let's go!"],battleAsk:["I want to challenge you for a battle!"],battleWin:["Really? You aren't mad?","You're not as bad as I expected tbh.","So?? Am I the boss now? How does it work? How can I reset the rules?","I thought so. I thought that was the story of the game! When is the Roshambo championship?","He???","Wow. And what about my Eclairs?","Fuck it!"],battleLose:["I'll be back with more practice"]}},Se={Frank:{starts:["Hey $PLAYERNAME! Whatsup.","Long time no see. Where are you these days?","I'm preparing for this year's RoShamBo competition.","BTW, your father is waiting for you inside. You should go and meet him.","Sure, see you."],follows:["I'm great. You talked to your father right!"],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Dad:{starts:["Hey kiddo! Glad you're back. It feels great seeing you!","Did you notice anything weird outside?","Its the markov tribe! Their boss won the Roshambo championship last year. Since then they have imposed new Roshambo rules in the town.","Now there is a level system in Roshambo. Every Roshambo player starts at level 1 and can go till level 5.","You can only battle a player who is at a lower or same level or 1 level higher than yours.","Yes, and thats why we need to overthrow this tribe.","We need to defeat their boss, only then we can remove these horrible rules.","Thats my kid! Look around the town for some Roshambo battlers for practice. Battle them to gain exp and level up.","Your baby brother missed you! Don't forget to play with him.","Btw, your favourite Big Chill cakery has opened nearby. You should check it out."],follows:["Key kiddo! You should probably go and defeat the tribe!"],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Joey:{starts:[],follows:[],battleAsk:["I wanna play!!!"],battleAcceptNeverDefeated:["Yayayayay! I'll defeat you again!"],battleDeclineDefeated:["I don't like playing with you!"],battleDecline:["I don't think you're on my level. Go and Practice"],battleLose:["You cheated!!!!"],battleWin:["I'm the best!!"]},Ace:{starts:["..."],follows:["Huff...I missed you..Huff...."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Tia:{starts:["Hey $PLAYERNAME! Whatsup!","You won't be able to get anything from here.","There is a markov tribe member inside. If you want an eclair, you need to defeat him in Roshambo first.","Everything belongs to them now. They have weird rules tbh.","I hope you have enough practice. You can battle my friend Samantha, she is inside the bakery."],follows:["I hope you defeat the tribe member."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Nathan:{starts:[],follows:[],battleAsk:["You won't be able to defeat me. Do you have the guts to battle?"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["Enough of Roshambo for the day!"],battleDecline:["I don't think you're on my level. Go and Practice"],battleLose:["You are great! Cheers!."],battleWin:["You're aweful. You need to practice."]},John:{starts:[],follows:[],battleAsk:["You won't be able to defeat me. Do you have the guts to battle?"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["Enough of Roshambo for the day!"],battleDecline:["I don't think you're on my level. Go and Practice"],battleLose:["You are great! Cheers!."],battleWin:["You're aweful. You need to practice."]},Samantha:{starts:[],follows:[],battleAsk:["Hey! Do you wanna battle? Winner gets a swiss roll :p"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["I can't afford another brownie lol!"],battleDecline:["I don't think you're on my level. Go and Practice"],battleLose:["You are great! Now you need to defeat the tribe member to get the free swiss roll. Hehe.","Really! You'll get a brownie as well if you defeat him."],battleWin:["Gosh! You're aweful. You need to practice. I don't think I'll ever get the swiss roll lol."]},Eden:{starts:[],follows:[],battleAsk:["Hey you! I think you're new here.","Just an eclair? You can have one.","No, I was kidding. You need to defeat me in Roshambo first.","I like defeating overconfident kids, lets go!"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["I don't have time for losers!"],battleDecline:["I don't think you're on my level. Go, battle and level up."],battleLose:["You have defeated me, but you won't be able to defeat our boss.","If you think you can get your eclair now, you are a fool!","Ah, I lied. You need to defeat our boss in order to change the rules. Hahahahaha.","Find him yourself. All the best. Hahahahahahahaha."],battleWin:["Typical overconfident kid. You can never defeat me, nevermind our boss!!"]},Tracer:{starts:["Hey $PLAYERNAME! Where are you heading towards?","I heard he lives in a cave somewhere in the north.","I'm the master of whisperers. Haha.","Hehe. Do you have any other option?","All the best. May the luck be with you."],follows:["Ohh, you are still alive!"],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Sean:{starts:["Hey $PLAYERNAME! Long time no see?","Ummm...not great.","Ummm....","Gambit and his bully friends are not allowing me to run my business!","He is a tribe member. That't why nobody is willing to help me.","He's on level 4, I don't think you can defeat him. I don't want to give you any trouble.","Okay, your call. But, be careful."],follows:["Be careful of the tribe, $PLAYERNAME."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Gambit:{starts:[],follows:[],battleAsk:["Hey kid! Stop wandering around here. This is tribe's property!","Your big mouth will lead you into trouble.","I can defeat you in 2 minutes. Challenge accepted."],battleAcceptNeverDefeated:["Again? Save your self respect!"],battleDeclineDefeated:["Go and battle our boss now!"],battleDecline:["You need to level up, loser!"],battleLose:["You got lucky. Nevermind, this town still belongs to us!"],battleWin:["You were a total waste of time."]},Chop:{starts:[],follows:[],battleAsk:["Do you wanna test your Roshambo skills against a real player?"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["Enough of Roshambo for the day!"],battleDecline:["I don't think you're on my level. Go and Practice."],battleLose:["Today is not my day. I should get some rest."],battleWin:["Was this your first time lol?"]},Molly:{starts:["Hey $PLAYERNAME. Glad you are here.","There's a lot of noise inside. The tribe members you know.","They are everywhere. We need to get rid of them.","First you need to defeat all of the tribe members. Only then you can battle their boss. I hope you knew this.","All the best! May the luck be with you."],follows:["Not great. I hope you defeat the tribe soon."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Jordan:{starts:[],follows:[],battleAsk:["You won't be able to defeat me. Do you have the guts to battle?"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["Enough of Roshambo for the day!"],battleDecline:["I don't think you're on my level. Go and Practice"],battleLose:["You are great! Cheers!."],battleWin:["You're aweful. You need to practice."]},Grindel:{starts:[],follows:[],battleAsk:["Do you wanna test your Roshambo skills against a real player?"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["Enough of Roshambo for the day!"],battleDecline:["I don't think you're on my level. Go and Practice."],battleLose:["Today is not my day. I should get some rest."],battleWin:["Was this your first time lol?"]},Tori:{starts:[],follows:[],battleAsk:["Test your Roshambo skills against a real player. Battle?"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["I need to study now!"],battleDecline:["I don't think you're on my level. Go and Practice."],battleLose:["So lucky you are! So lucky you are!"],battleWin:["Was this your first time lol?"]},Ghissu:{starts:["Hey $PLAYERNAME! Whatsup!","No! still 4th revision remaining. BTW, what are you doing here?","Yeah, they play all sorts of horrible music here, and particularly during daytime.","In the gameroom, first floor.","Hopefully your Roshambo is better than your sense of humour."],follows:["Hey! Get lost now. I have to study."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Razor:{starts:[],follows:[],battleAsk:["Hey! Stop disturbing me! I watching something important.","Don't teach me the rules. I make the rules here.","Stop day dreaming you idiot. I challenge you for a Roshambo battle.","You won't dare to speak a word against the tribe after this."],battleAcceptNeverDefeated:["Again? Save your self respect!"],battleDeclineDefeated:["You don't have friends? Leave me alone now!"],battleDecline:["You need to level up, loser!"],battleLose:["You got lucky. Nevermind, this town still belongs to us!"],battleWin:["You were a total waste of time.","Now shut up and FO!"]},Prick:{starts:[],follows:[],battleAsk:["Hey kid! Do you wanna battle?"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["Enough of Roshambo for the day!"],battleDecline:["I don't think you're on my level. Go and Practice."],battleLose:["So lucky you are! So lucky you are!"],battleWin:["Was this your first time lol?"]},LT:{starts:["Hey you! Don't disturb Razor. He doesn't like interruptions in between a movie."],follows:["Get lost from here."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Rose:{starts:["Hey! Please help me get my sparkle back. Snyder and his friend are not letting her go.","Yes.","Thanks!"],follows:["She' still with them! :("],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Snyder:{starts:[],follows:[],battleAsk:["Hey you! stop disturbing us.","This isn't your dog, so stop bothering. Stay away from us, otherwise we'll teach you a lesson.","Hahahahaha. You can't touch even him!","Really? Challenge accepted!","If you lose, you stay away from us!"],battleAcceptNeverDefeated:["Again? Save your self respect!"],battleDeclineDefeated:["We don't have time for you now."],battleDecline:["You need to level up, loser!"],battleLose:["You got lucky. Nevermind, this town still belongs to us!"],battleWin:["You were a total waste of time.","Now get lost!"]},Kaloo:{starts:["Meoww..."],follows:["....Meow.....Fuck off.....Meow..."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Goku:{starts:["Meoww...Meoww..."],follows:["Grhhhhhh....."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Misty:{starts:["Meoww...Meoww..."],follows:["Grhhhhhh....."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Trigger:{starts:["Meoww....You'll die...Meoww...."],follows:["Grhhhhhh.....Step aside....."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Max:{starts:[],follows:[],battleAsk:["Hey! Do you wanna battle?"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["Enough of Roshambo for the day!"],battleDecline:["I don't think you're on my level. Go and Practice."],battleLose:["So lucky you are! So lucky you are!"],battleWin:["Was this your first time lol?"]},Maty:{starts:["Hey $PLAYERNAME! Long time!","I'm great! Never seen you on this side of town before?","You're living dangerously. Btw, you can find one of the tribe members near the hammock by the pool.","Yeah. Before he creates more havoc near the hammock lol. All the best"],follows:["Hey $PLAYERNAME. I hope you defeat the boss."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Damon:{starts:[],follows:[],battleAsk:["Do you wanna test your Roshambo skills against a real player?"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["Enough of Roshambo for the day!"],battleDecline:["I don't think you're on my level. Go and Practice."],battleLose:["Today is not my day. I should get some rest."],battleWin:["Was this your first time lol?"]},Tegan:{starts:[],follows:[],battleAsk:["Hey kid! I heard you are looking for the tribe boss.","Me? Why?","Keep dreaming kid. I challenge you for a battle. Let me bring you down to earth haha."],battleAcceptNeverDefeated:["Again? Save your self respect unless you want to go underground lol."],battleDeclineDefeated:["I don't have time for you!"],battleDecline:["You need to level up, loser!"],battleLose:["You got lucky. Nevermind, this town still belongs to us!"],battleWin:["You were a total waste of time.","Now shut up and FO!"]},Hunt:{starts:[],follows:[],battleAsk:["Do you wanna test your Roshambo skills against a real player?"],battleAcceptNeverDefeated:["How many times you wanna lose!!"],battleDeclineDefeated:["Enough of Roshambo for the day!"],battleDecline:["I don't think you're on my level. Go and Practice."],battleLose:["Today is not my day. I should get some rest."],battleWin:["Was this your first time lol?"]},Fattu:{starts:["Dude! Stop here. Don't go inside.","She is. Thats why.","You will definitely die, sexist."],follows:["You are still alive!"],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Rock:{starts:["Meoww....You'll die...Meoww...."],follows:["Meoww...Hail Markov...Meoww..."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Paper:{starts:["Meoww....You'll die...Meoww...."],follows:["Meoww..Markov greater Bayesian....Meoww..."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Scissors:{starts:["Meoww....You'll die...Meoww...."],follows:["Meoww...Hail Markov...Meoww..."],battleAsk:[],battleAcceptNeverDefeated:[],battleDeclineDefeated:[],battleDecline:[],battleLose:[],battleWin:[]},Beast:{starts:[],follows:[],battleAsk:["Hey! What are you doing here?","Is there anyone else over here wearing a semi-naked vamp costume? I'm the boss and my name is Beast.","I know. There can be no other reason for you to be here.","Oh you like cats? The black one is Rock, the white one is Paper and the ginger one is Scissors. Stay away from them.","I thought you were here for the battle. Just being professional."],battleAcceptNeverDefeated:["I hope you are prepared this time."],battleDeclineDefeated:["Neh, not now. See you at the championships!"],battleDecline:["You need to defeat all my tribe members first! Plus you need to be on Level 5."],battleLose:["You defeated me all fair and square. Kudos to you.","No, you are a deserving winner. And I'm not a sore loser.","Now I feel much better lol.","You cannot just reset the rules! You need to defeat me in the Roshambo championship. You thought you could be the tribe boss on the basis of a friendly battle?","Next year. He needs to start coding for the that.","The developer of this game.","Ask the developer."],battleWin:["You really thought you got a chance here lol."]}};function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _e=function(e,t,a){return e[0]>=0&&e[0]<=t-80&&e[1]>=0&&e[1]<=a-80},Ne=function(e,t){return t.filter(function(t){return!t.isAnimating&&(e[0]===t.position[0]&&e[1]===t.position[1])})},xe=function(e,t){return t.filter(function(t){return!!t.isAnimating&&(e[0]===t.nextPosition[0]&&e[1]===t.nextPosition[1])})},Le=function(e,t,a){switch(t){case f:return[e[0]-a,e[1]];case g:return[e[0]+a,e[1]];case v:return[e[0],e[1]-a];case w:return[e[0],e[1]+a];default:window.alert("Something went wrong! Please relaunch the game.")}},Re=function(e,t,a){switch(t){case f:return[e[0]+a,e[1]];case g:return[e[0]-a,e[1]];case v:return[e[0],e[1]+a];case w:return[e[0],e[1]-a];default:window.alert("Something went wrong! Please relaunch the game.")}},Ce=function(e,t){return e.filter(function(e){return e.id===t})[0]},Me=function(e,t){return e===g&&0===t||(e===w&&90===t||(e===f&&180===t||e===v&&270===t))},We=function(e){return function(t,a){var n=a().player;if(!(n.interacting||n.isAnimating||n.frozen||n.inBattle)){var r,o=a().viewport.viewportDims[0],i=a().viewport.viewportDims[1],l=n.position,s=[],c=a().viewport.start,p=a().viewport.end,u=a().map,d=n.skin.walkSpriteCount,h=!1,m=80/d;if(37===e?s=Le(l,r=f,80):39===e?s=Le(l,r=g,80):38===e?s=Le(l,r=v,80):40===e&&(s=Le(l,r=w,80)),n.direction!==r&&t(bt(r)),_e(s,u.width,u.height)&&function(e,t){var a=me(t,80),n=a[0],r=a[1];return Math.abs(e[n][r])<=5}(a().map.tiles,s)){var b=Ne(s,a().npc.list),y=xe(s,a().npc.list);0===b.length&&0===y.length?(t(ut(!0,s)),function(e,t,a,n){var r=de(e,a);return t===f||t===g?r[0]>=n[0][0]&&r[0]<=n[0][1]:t===v||t===w?r[1]>=n[1][0]&&r[1]<=n[1][1]:void 0}(l,r,c,a().viewport.camera)&&function(e,t,a,n,r){switch(e){case f:return t[0]<0;case v:return t[1]<0;case g:return a[0]>n;case w:return a[1]>r;default:return!1}}(r,c,p,o,i)?(h=!0,requestAnimationFrame(O)):(h=!1,requestAnimationFrame(O))):b.length>0&&n.nearbyNPC!==b[0].id&&(t(yt(b[0].id)),b[0].battle&&!b[0].battleFlag?t(Je(a().player,b[0])):b[0].talkFlag||t($e(a().player,b[0])))}else{var k=Ne(s,a().npc.list);k.length>0?n.nearbyNPC!==k[0].id&&(t(yt(k[0].id)),k[0].battle&&!k[0].battleFlag?t(Je(a().player,k[0])):k[0].talkFlag||t($e(a().player,k[0]))):null!==n.nearbyNPC&&t(yt())}}function O(){if(0!==d)s=Le(l,r,m),t(ht(s)),l=s,h&&(c=Re(c,r,m),t(wt(c))),d--,setTimeout(function(){requestAnimationFrame(O)},n.frameInterval);else{t(ut(!1));var e=Be(a().player.position,a().player.direction,a().npc.list);e.length?(t(yt(e[0].id)),e[0].battle&&!e[0].battleFlag?t(Je(a().player,e[0])):e[0].talkFlag||t($e(a().player,e[0]))):null!==n.nearbyNPC&&t(yt());var o=Ye(a().player.position,a().gameobjects);o.length?t(ft(o[0].id)):null!==n.nearbyGameObj&&t(ft());var i=qe(a().player.position,a().gameobjects);i.length>0&&Me(a().player.direction,i[0].rotate)&&t(Qe(i[0]))}}}},Ge=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ye=function(e,t){return t.filter(function(t){return _.includes(t.type.type)&&Ge(e,t.position)})},Fe=function(e){switch(e){case v:return w;case g:return f;case w:return v;case f:return g;default:window.alert("Something went wrong! Please relaunch the game.")}},He=function(e,t,a){return function(e,t){return!t.isAnimating&&(e[0]===t.position[0]&&e[1]===t.position[1])}(Le(e,t,80),a)},Be=function(e,t,a){var n=Le(e,t,80);return Ne(n,a)},Ue=function(e,t){return t-e<=1},ze=function(e){return 5===Object.keys(e).length},Je=function(e,t){return function(a,n){var r=n().viewport.viewportDims[1];if(Ue(e.battle.level,t.level)&&(t.battlerType!==N||ze(e.battle.defeatedGangMembers))){var o=Fe(e.direction);t.direction!==o&&a(gt(t.id,o)),a(kt(t.id,{name:t.name,dialogs:Se[t.name].battleAsk.map(function(t){return t.replace("$PLAYERNAME",e.name)})},{name:e.name,dialogs:De[t.name].battleAccept.map(function(t){return t.replace("$PLAYERNAME",e.name)})},de(e.position,n().viewport.start)[1]>r/3?"top":"bottom",!0))}}},$e=function(e,t){return function(a,n){var r=n().viewport.viewportDims[1],o=Fe(e.direction);t.direction!==o&&a(gt(t.id,o)),a(kt(t.id,{name:t.name,dialogs:Se[t.name].starts.map(function(t){return t.replace("$PLAYERNAME",e.name)})},{name:e.name,dialogs:De[t.name].follows.map(function(t){return t.replace("$PLAYERNAME",e.name)})},de(e.position,n().viewport.start)[1]>r/3?"top":"bottom",!1))}},Ke=function(){return function(e,t){var a=t().player,n=null!==a.nearbyNPC?Ce(t().npc.list,a.nearbyNPC):null,r=t().viewport.viewportDims[1];if(n&&!n.isAnimating){var o=Fe(a.direction);n.direction!==o&&e(gt(n.id,o)),n.battle?Ue(a.battle.level,n.level)?n.battlerType===N?ze(a.battle.defeatedGangMembers)?e(kt(n.id,{name:a.name,dialogs:De[n.name].battleAsk.map(function(e){return e.replace("$PLAYERNAME",a.name)})},{name:n.name,dialogs:Se[n.name].battleAcceptNeverDefeated.map(function(e){return e.replace("$PLAYERNAME",a.name)})},de(a.position,t().viewport.start)[1]>r/3?"top":"bottom",!0)):e(kt(n.id,{name:a.name,dialogs:De[n.name].battleAsk.map(function(e){return e.replace("$PLAYERNAME",a.name)})},{name:n.name,dialogs:Se[n.name].battleDecline.map(function(e){return e.replace("$PLAYERNAME",a.name)})},de(a.position,t().viewport.start)[1]>r/3?"top":"bottom",!1)):n.defeatedCount>0?e(kt(n.id,{name:a.name,dialogs:De[n.name].battleAsk.map(function(e){return e.replace("$PLAYERNAME",a.name)})},{name:n.name,dialogs:Se[n.name].battleDeclineDefeated.map(function(e){return e.replace("$PLAYERNAME",a.name)})},de(a.position,t().viewport.start)[1]>r/3?"top":"bottom",!1)):e(kt(n.id,{name:a.name,dialogs:De[n.name].battleAsk.map(function(e){return e.replace("$PLAYERNAME",a.name)})},{name:n.name,dialogs:Se[n.name].battleAcceptNeverDefeated.map(function(e){return e.replace("$PLAYERNAME",a.name)})},de(a.position,t().viewport.start)[1]>r/3?"top":"bottom",!0)):e(kt(n.id,{name:a.name,dialogs:De[n.name].battleAsk.map(function(e){return e.replace("$PLAYERNAME",a.name)})},{name:n.name,dialogs:Se[n.name].battleDecline.map(function(e){return e.replace("$PLAYERNAME",a.name)})},de(a.position,t().viewport.start)[1]>r/3?"top":"bottom",!1)):e(kt(n.id,{name:a.name,dialogs:n.name in De?De[n.name].starts.map(function(e){return e.replace("$PLAYERNAME",a.name)}):["Hey! Whatsup!"]},{name:n.name,dialogs:n.name in Se?Se[n.name].follows.map(function(e){return e.replace("$PLAYERNAME",a.name)}):["Ehh! Leave me alone!"]},de(a.position,t().viewport.start)[1]>r/3?"top":"bottom",!1))}}},Ve=function(){return function(e,t){var a=t().dialog;0!==a.speakerIdx?a.dialogIdx+1<a.person1.dialogs.length?e(Et()):(a.battleConversation&&e(et(t().player,Ce(t().npc.list,a.npcId))),e(Ot(a.npcId))):e(Et())}},Xe=function(e){return function(t,a){var n=Ce(a().npc.list,e);if(!(n.stationary||n.isAnimating||n.interacting||n.inBattle)){if(n.isWaiting){if(performance.now()-n.lastUpdated<n.waitInterval)return;t(vt(e))}var r=n.direction;if(n.pathArr.length<2)r!==n.defaultDirection&&t(gt(e,n.defaultDirection));else{var o=n.skin.walkSpriteCount,i=n.position,l=80/o,s=he(n.pathArr[n.pathIdx+n.pathDir],80),c=function(e,t,a){return e[0]===t[0]?e[1]>t[1]?v:e[1]<t[1]?w:a:e[1]!==t[1]?a:e[0]>t[0]?f:e[0]<t[0]?g:void 0}(i,s,r);r!==c&&t(gt(e,c));var p=a().map;if(_e(s,p.width,p.height))if(function(e,t){return t.isAnimating?!(e[0]===t.nextPosition[0]&&e[1]===t.nextPosition[1]):!(e[0]===t.position[0]&&e[1]===t.position[1])}(s,a().player)){var u=Ne(s,a().npc.list),d=xe(s,a().npc.list);0===u.length&&0===d.length&&(t(dt(e,!0,s)),requestAnimationFrame(function r(){if(0===o){t(dt(e,!1));var p=a().player,u=Ce(a().npc.list,e);return void(He(u.position,u.direction,p)?p.direction===Fe(u.direction)&&(t(yt(u.id)),u.battle&&!u.battleFlag?t(Je(a().player,u)):u.talkFlag||t($e(a().player,u))):p.nearbyNPC===u.id&&t(yt()))}s=Le(i,c,l);t(mt(e,s));i=s;o--;ve(function(){requestAnimationFrame(r)},n.frameInterval,n.id)}))}else a().player.nearByNPC!==n.id&&a().player.direction===Fe(n.direction)&&(t(yt(n.id)),n.battle&&!n.battleFlag?t(Je(a().player,n)):n.talkFlag||t($e(a().player,n)))}}}},qe=function(e,t){return t.filter(function(t){return"PORTAL"===t.type.type&&Ge(e,t.position)})},Qe=function(e){return function(t,a){if(null!==e)if("enter"===e.type.name){t(At()),fe(),function n(){a().npc.list.filter(function(e){return e.isAnimating}).length>0?setTimeout(n,500):(t(Tt(a())),t(Ze(e.target,!0)))}()}else if("leave"===e.type.name){var n=Object(b.a)(a().statemanager.prevStates);if(!n.length)return;var r=n.pop(),o=a().map.name,i=a().gameobjects.map(function(e){return Pe({},e,{position:me(e.position,80)})}),l=a().npc.list.map(function(e){return{id:e.id,battleFlag:e.battleFlag,defeatedCount:e.defeatedCount}});t(At()),fe(),function e(){if(a().npc.list.filter(function(e){return e.isAnimating}).length>0)setTimeout(e,500);else{t(Pt());var s=new Image;s.onload=function(){t(St({map:o,gameobjects:i,npc:l},r,n))},s.src=r.map.src}}()}}},Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a,n){a(Pt());var r,o,i,l,s=80*e.map.tiles[0].length,c=80*e.map.tiles.length,p=he(e.player.position,80),u=n().viewport.viewportDims[0],d=n().viewport.viewportDims[1];s<=u?i=(r=u/2-s/2)+s:(i=(r=(r=u/2-p[0]-80)>=0?0:r)+s)<u&&(r=(i=u)-s),c<=d?l=(o=d/2-c/2)+c:(l=(o=(o=d/2-p[1]-80)>=0?0:o)+c)<d&&(o=(l=d)-c);var h=[r,o],m=[i,l],b=null;if(t){var y=n().statemanager;b=e.name in y?y[e.name]:null}var f=new Image;f.onload=function(){a(Nt(e,s,c,p,h,m,b,t))},f.src=e.map.src}},et=function(e,t){return{type:"START_BATTLE",payload:{player:e,npc:t}}},tt=function(e){return Math.floor(Math.random()*(e+1))%(e+1)},at=function(e,t,a){var n,r,o=t.length-1;return"NON_GANG_MEMBER"===e||null===a?n=tt(o):(r=t[a].reduce(function(e,t,a,n){return t>n[e]?a:e},0),n=0===t[a][r]?tt(o):function(e,t){switch(e){case 0:return 1;case 1:return 2;case 2:return 0;default:return tt(t)}}(r)),n},nt=function(e){switch(e){case 0:return"ROCK";case 1:return"PAPER";case 2:return"SCISSORS";default:return"Undefined"}},rt=function(e){return function(t,a){Te($);var n,r,o=a().battle,i=o.player.markovMatrix,l=o.player.lastMove,s=at(o.npc.battlerType,i,l),c=(r=s,0===(n=e)?2===r?1:1===r?-1:0:1===n?0===r?1:2===r?-1:0:2===n?1===r?1:0===r?-1:0:void 0),p=function(e,t,a,n,r){return e+" chose "+nt(t)+". "+(a+" chose "+nt(n)+". ")+(1===r?e+" wins this round!":-1===r?a+" wins this round!":"Its a DRAW!")}(o.player.name,e,o.npc.name,s,c);t(pt(e,s,c,p));var u=lt(a().battle);if(0!==u){var d=(o=a().battle).player.exp+ot(o.player.score,o.player.level,o.npc.level,u),h=it(d);setTimeout(function(){t(st(u,{newlevel:h,newexp:d,gangMember:1===u&&o.npc.battlerType===x?o.npc.name:null},o.npc.id))},1200)}}},ot=function(e,t,a,n){return 1===n?5+e+Math.max(10*(a-(t-1)),10)+10:5+e},it=function(e){return e<60?1:e<180?2:e<360?3:e<540?4:e<1e3?5:6},lt=function(e){return 0===e.player.lives?-1:0===e.npc.lives?1:0},st=function(e,t,a){return{type:"END_BATTLE",payload:{battleWinner:e,player:t,npcId:a}}},ct=function(){return{type:"CLOSE_BATTLE"}},pt=function(e,t,a,n){return{type:"SUBMIT_MOVES",payload:{playermove:e,npcmove:t,winner:a,summary:n}}},ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:"UPDATE_PLAYER_ANIMATION",payload:{isAnimating:e,newpos:t}}},dt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"UPDATE_NPC_ANIMATION",payload:{id:e,isAnimating:t,newpos:a}}},ht=function(e){return{type:"UPDATE_PLAYER_POSITION",payload:{position:e}}},mt=function(e,t){return{type:"UPDATE_NPC_POSITION",payload:{id:e,position:t}}},bt=function(e){return{type:"UPDATE_PLAYER_DIRECTION",payload:{direction:e}}},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"UPDATE_NEARBY_NPC",payload:{npcId:e}}},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"UPDATE_NEARBY_GAMEOBJ",payload:{id:e}}},gt=function(e,t){return{type:"UPDATE_NPC_DIRECTION",payload:{id:e,direction:t}}},vt=function(e){return{type:"RESET_NPC_WAITING",payload:{id:e}}},wt=function(e){return{type:"UPDATE_MAP_ORIGIN",payload:{origin:e}}},kt=function(e,t,a,n,r){return Te(F),{type:"SET_DIALOG_STATUS",payload:{person1:t,person2:a,npcId:e,position:n,battleConversation:r}}},Ot=function(e){return{type:"RESET_DIALOG_STATUS",payload:{npcId:e}}},Et=function(){return Te(F),{type:"NEXT_DIALOG"}},It=function(e){return{type:"ADD_OBJECT_TO_INVENTORY",payload:{object:e}}},At=function(){return{type:"SAVE_STATE_INITIATED"}},Tt=function(e){return{type:"SAVE_STATE",payload:{state:e}}},Dt=function(){return{type:"SAVE_STATE_END"}},St=function(e,t,a){return{type:"RESTORE_STATE",payload:{mapinfo:e,state:t,prevStates:a}}},jt=function(e){return{type:"RESTORE_STATE_FROM_DISK",payload:{state:e}}},Pt=function(){return{type:"MAP_LOADING"}},_t=function(e,t){var a=null;return e.map(function(e){return Pe({},e,{battleFlag:(a=Ce(t,e.id)).battleFlag,defeatedCount:a.defeatedCount})})},Nt=function(e,t,a,n,r,o,i,l){return{type:y,payload:{secondary:l,name:e.name,tiles:e.map.tiles,width:t,height:a,src:e.map.src,audioSrc:e.map.audioSrc,viewport:{start:r,end:o},player:Pe({},e.player,{position:n}),npc:i?_t(e.npc,i.npc):e.npc,gameobjects:i?i.gameobjects:e.gameobjects.concat(e.portals)}}},xt={player_1:{src:G+"/player_1",width:80,height:60,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},player_2:{src:G+"/player_2",width:80,height:60,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},prof:{src:G+"/prof",width:80,height:80,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},friend_1:{src:G+"/friend_1",width:64,height:64,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},friend_2:{src:G+"/friend_2",width:70,height:70,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},friend_3:{src:G+"/friend_3",width:70,height:70,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},friend_4:{src:G+"/friend_4",width:70,height:70,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},friend_5:{src:G+"/friend_5",width:64,height:64,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},friend_6:{src:G+"/friend_6",width:68,height:72,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},friend_7:{src:G+"/friend_7",width:68,height:72,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},friend_8:{src:G+"/friend_8",width:64,height:91,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},friend_9:{src:G+"/friend_9",width:68,height:72,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},kid_1:{src:G+"/kid_1",width:64,height:64,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},kid_2:{src:G+"/kid_2",width:64,height:64,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},kid_3:{src:G+"/kid_3",width:64,height:64,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},nurse:{src:G+"/nurse",width:68,height:72,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},chef:{src:G+"/chef",width:80,height:80,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},bully_1:{src:G+"/bully_1",width:48,height:60,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},crush_1:{src:G+"/crush_1",width:68,height:72,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},crush_2:{src:G+"/crush_2",width:68,height:72,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},crush_3:{src:G+"/crush_3",width:80,height:80,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},crush_4:{src:G+"/crush_4",width:64,height:64,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},tribe_1:{src:G+"/tribe_1",width:80,height:80,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},tribe_2:{src:G+"/tribe_2",width:80,height:80,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},tribe_3:{src:G+"/tribe_3",width:64,height:64,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},tribe_4:{src:G+"/tribe_4",width:80,height:80,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},tribe_5:{src:G+"/tribe_5",width:80,height:80,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},boss:{src:G+"/boss",width:80,height:80,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},whitepuppy:{src:G+"/puppy_white",width:40,height:40,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},brownpuppy:{src:G+"/puppy_brown",width:40,height:40,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},blackcat:{src:G+"/cat_black",width:40,height:40,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},whitecat:{src:G+"/cat_white",width:40,height:40,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},orangecat:{src:G+"/cat_orange",width:40,height:40,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4},baby:{src:G+"/baby",width:30,height:45,UP:1,RIGHT:2,DOWN:0,LEFT:3,walkSpriteCount:4}},Lt="".concat(Y,"/items.png"),Rt="".concat(Y,"/portal.png"),Ct="".concat(Y,"/enter.png"),Mt="".concat(Y,"/leave.png"),Wt=[{id:0,name:"redpotion",src:Lt,srcpos:[0,0],width:40,height:40,type:"HEALER"},{id:1,name:"vaccine",src:Lt,srcpos:[200,0],width:40,height:40,type:"HEALER"},{id:2,name:"water",src:Lt,srcpos:[240,0],width:40,height:40,type:"EATABLE"},{id:3,name:"berry",src:Lt,srcpos:[240,280],width:40,height:40,type:"EATABLE"},{id:4,name:"diamond",src:Lt,srcpos:[240,200],width:40,height:40,type:"CURRENCY"},{id:5,name:"meat",src:Lt,srcpos:[280,160],width:40,height:40,type:"EATABLE"},{id:6,name:"bone",src:Lt,srcpos:[200,160],width:40,height:40,type:"EATABLE"},{id:7,name:"goldcoin",src:Lt,srcpos:[280,120],width:40,height:40,type:"CURRENCY"},{id:8,name:"hen",src:"assets/images/80/objectsAndProps/hen.png",srcpos:[0,0],width:32,height:36,effects:"spotanimate",type:"HEN"}],Gt=[{id:0,name:"enter",src:Ct,srcpos:[0,0],width:40,height:40,type:"PORTAL"},{id:1,name:"leave",src:Mt,srcpos:[0,0],width:40,height:40,type:"PORTAL"},{id:2,name:"portal",src:Rt,srcpos:[0,0],width:64,height:64,effects:"rotate",type:"PORTAL"}],Yt={tiles:[[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,0,0,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,0,0,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,0,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,0,0,0,10,0,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,0,0,0,0,0,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,0,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,0,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,0,10,10,10,10,10,10,10,10,10,10,10],[10,10,0,10,10,10,10,10,10,10,0,10,10,10,10,10,10,10,10,10,10,10],[10,10,0,10,10,10,10,10,10,10,0,10,10,10,10,0,10,10,10,10,10,10],[10,10,0,10,10,10,10,10,10,10,0,10,10,10,10,0,10,10,10,10,10,10],[10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,10],[10,10,0,10,10,10,10,10,10,10,0,10,10,10,10,10,10,10,10,10,10,10],[10,10,0,10,10,10,10,10,10,10,0,10,10,10,10,10,10,10,10,10,10,10],[10,10,0,10,10,10,10,10,10,10,0,10,10,10,10,10,10,10,10,10,10,10],[0,0,0,10,10,10,10,10,10,10,0,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,0,10,10,10,10,0,0,10,10,10,0,0],[10,10,10,10,10,10,10,10,10,10,0,0,0,0,10,0,10,10,10,10,10,0],[10,10,10,10,10,10,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10]],src:"".concat(W,"/town_center.png"),backgroundColor:"#ffffff",audioSrc:V},Ft={name:"home",map:{tiles:[[10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10],[0,10,10,10,10,10,10,10,0],[0,0,10,10,10,10,10,10,0],[0,0,10,10,10,10,10,0,0],[0,0,10,10,10,10,10,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,10,0,10,0,0,0]],src:"".concat(W,"/home.png"),backgroundColor:"#ffffff",audioSrc:Q},player:{position:[7,4],direction:"UP"},npc:[{id:0,name:"Dad",skin:xt.prof,direction:f,stationary:!1,pathArr:[[6,3],[6,4]],frameInterval:100,moveInterval:500,waitInterval:1e3,talkFlag:!1},{id:1,name:"Joey",skin:xt.baby,direction:w,stationary:!1,pathArr:[[4,7],[4,8],[5,8],[6,8],[6,7],[5,7],[4,7]],frameInterval:200,moveInterval:500,waitInterval:1e3,battle:!0,level:1,battlerType:"NON_GANG_MEMBER"},{id:2,name:"Ace",skin:xt.brownpuppy,direction:w,stationary:!1,pathArr:[[3,1],[4,1],[5,1]],frameInterval:100,moveInterval:500,waitInterval:1e3}],gameobjects:[],portals:[{position:[8,4],type:Gt[1],rotate:90}]},Ht={name:"bakery",map:{tiles:[[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[0,0,0,0,0,10,10,10,10,10,0,0,0,0,10],[0,0,0,0,0,10,10,10,10,10,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,10,10,10,10,0,0,0,10,10,10,10,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,10,0,10,0,0,0,0,0,0]],src:"".concat(W,"/bakery.png"),backgroundColor:"#ffffff",audioSrc:Z},player:{position:[8,7],direction:"UP"},npc:[{id:0,name:"Vincent",skin:xt.friend_3,direction:g,stationary:!1,pathArr:[[3,0]],frameInterval:100,moveInterval:500,waitInterval:3e3},{id:1,name:"Chase",skin:xt.friend_2,direction:f,stationary:!1,pathArr:[[3,1]],frameInterval:100,moveInterval:500,waitInterval:3e3},{id:2,name:"Samantha",skin:xt.crush_1,direction:g,stationary:!1,pathArr:[[6,3],[6,4]],frameInterval:100,moveInterval:500,waitInterval:4e3,battle:!0,level:2,battlerType:"NON_GANG_MEMBER"},{id:3,name:"Eden",skin:xt.tribe_1,direction:g,stationary:!1,pathArr:[[4,7],[4,8]],frameInterval:100,moveInterval:500,waitInterval:2e3,battle:!0,level:3,battlerType:x,battleMusic:le},{id:4,name:"John",skin:xt.kid_1,direction:v,stationary:!1,pathArr:[[2,13]],frameInterval:100,moveInterval:500,waitInterval:3e3,battle:!0,level:1,battlerType:"NON_GANG_MEMBER"},{id:5,name:"Cena",skin:xt.friend_4,direction:v,stationary:!1,pathArr:[[2,11],[2,10]],frameInterval:100,moveInterval:500,waitInterval:6e3}],gameobjects:[],portals:[{position:[9,7],type:Gt[1],rotate:90}]},Bt={tiles:[[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,0,0,0,10,10,10,10,10,10,10,10],[10,10,10,10,10,0,0,0,0,0,0,0,0,0,0,10],[10,10,10,10,10,0,0,0,0,0,0,0,0,0,0,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,0,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,0,10],[10,10,10,10,10,10,0,0,0,0,0,10,10,10,0,10],[10,10,10,10,10,10,10,10,10,10,0,10,10,10,0,10],[10,10,10,10,10,10,10,10,10,10,0,0,0,0,0,10],[10,10,10,10,10,10,10,10,10,10,0,0,0,0,0,10],[10,10,10,10,10,10,10,10,10,10,0,10,10,10,0,10],[10,10,10,10,10,10,10,10,10,10,0,10,10,10,0,10],[10,10,10,10,10,10,10,10,10,10,0,10,10,10,0,10],[10,10,10,10,10,10,10,10,10,0,0,10,10,10,0,10],[10,10,10,10,10,10,0,0,0,0,0,10,10,10,0,0],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10]],src:"".concat(W,"/town_north.png"),backgroundColor:"#ffffff",audioSrc:X},Ut={tiles:[[10,10,10,10,10],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,10]],src:"".concat(W,"/cave.png"),backgroundColor:"#ffffff",audioSrc:ne},zt={tiles:[[10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10],[10,10,10,0,0,0,10,10,10],[10,10,0,0,0,0,0,10,10],[10,10,0,0,0,0,0,10,10],[10,10,0,0,0,0,10,10,10],[10,10,10,10,0,10,10,10,10],[10,10,10,10,0,10,10,10,10],[10,10,10,10,0,10,10,10,10]],src:"".concat(W,"/hell.png"),backgroundColor:"#ffffff",audioSrc:re},Jt={name:"townNorth",map:Bt,player:{position:[19,14],direction:"LEFT"},npc:[{id:0,name:"Kaloo",skin:xt.blackcat,direction:w,stationary:!1,pathArr:[[8,5],[8,6],[8,7]],frameInterval:50,moveInterval:250,waitInterval:2e3},{id:1,name:"Goku",skin:xt.whitecat,direction:w,stationary:!1,pathArr:[[10,7],[10,6],[10,5],[11,5],[12,5],[13,5],[14,5],[15,5]],frameInterval:100,moveInterval:500,waitInterval:2e3},{id:2,name:"bruno",skin:xt.brownpuppy,direction:w,stationary:!1,pathArr:[[10,6],[10,5],[11,5],[12,5],[13,5],[14,5],[15,5],[16,5]],frameInterval:100,moveInterval:500,waitInterval:2e3},{id:3,name:"Maty",skin:xt.crush_1,direction:g,stationary:!1,pathArr:[[13,11],[13,12]],frameInterval:100,moveInterval:500,waitInterval:3e3,talkFlag:!1},{id:4,name:"Tegan",skin:xt.tribe_4,direction:g,stationary:!1,pathArr:[[19,6],[19,7],[19,8]],frameInterval:100,moveInterval:500,waitInterval:1500,battle:!0,level:5,battlerType:x,battleMusic:le},{id:5,name:"Matt",skin:xt.friend_2,direction:g,stationary:!1,pathArr:[[11,6]],frameInterval:100,moveInterval:500,waitInterval:2e3},{id:6,name:"Damon",skin:xt.friend_3,direction:f,stationary:!1,pathArr:[[11,7]],frameInterval:100,moveInterval:500,waitInterval:2e3,battle:!0,level:4,battlerType:"NON_GANG_MEMBER"},{id:7,name:"Fattu",skin:xt.kid_2,direction:w,stationary:!1,pathArr:[[6,5]],frameInterval:100,moveInterval:500,waitInterval:3e3,talkFlag:!1},{id:8,name:"Hunt",skin:xt.friend_9,direction:w,stationary:!1,pathArr:[[7,14]],frameInterval:100,moveInterval:500,waitInterval:2e3,battle:!0,level:4,battlerType:"NON_GANG_MEMBER"}],gameobjects:[],portals:[{position:[6,6],type:Gt[0],rotate:270,target:{name:"hauntedhouse",map:Ut,player:{position:[3,2],direction:"UP"},npc:[{id:0,name:"Misty",skin:xt.blackcat,direction:w,stationary:!1,pathArr:[[1,0],[2,0],[3,0],[4,0]],frameInterval:100,moveInterval:500,waitInterval:1e3},{id:1,name:"Trigger",skin:xt.orangecat,direction:g,stationary:!1,pathArr:[[1,1],[1,2],[1,3],[1,4]],frameInterval:100,moveInterval:500,waitInterval:2e3,talkFlag:!1}],gameobjects:[],portals:[{position:[1,2],type:Gt[0],rotate:270,target:{name:"hell",map:zt,player:{position:[7,4],direction:"UP"},npc:[{id:0,name:"Beast",skin:xt.boss,direction:g,stationary:!1,pathArr:[[2,3]],frameInterval:100,moveInterval:500,waitInterval:3e3,battle:!0,level:6,battlerType:N,battleMusic:ie},{id:1,name:"Rock",skin:xt.blackcat,direction:g,stationary:!1,pathArr:[[5,3],[5,2],[4,2],[3,2],[3,3],[3,4],[3,5],[3,6]],frameInterval:100,moveInterval:500,waitInterval:2e3},{id:2,name:"Paper",skin:xt.whitecat,direction:f,stationary:!1,pathArr:[[2,4],[2,5]],frameInterval:100,moveInterval:500,waitInterval:1e3},{id:3,name:"Scissors",skin:xt.orangecat,direction:f,stationary:!1,pathArr:[[4,2],[4,3],[4,4],[4,5],[4,6]],frameInterval:100,moveInterval:500,waitInterval:1e3}],gameobjects:[],portals:[{position:[8,4],type:Gt[1],rotate:90}]}},{position:[4,2],type:Gt[1],rotate:90}]}},{position:[19,15],type:Gt[1],rotate:0}]},$t={tiles:[[10,10,10,10,10,10,10,10,0,0,10,10],[10,10,10,10,10,10,10,10,0,0,10,10],[10,10,10,10,10,10,10,10,0,0,0,0],[10,10,10,10,10,10,10,10,0,0,0,0],[10,10,10,10,10,0,10,10,0,0,0,0],[10,10,10,0,0,0,0,0,0,10,10,0],[10,10,10,0,0,0,0,0,10,0,0,0],[10,10,10,10,10,10,10,0,10,10,10,10],[10,0,0,0,0,0,0,0,10,10,10,10],[10,0,10,10,10,10,10,10,10,10,10,10],[10,0,10,10,10,10,10,10,10,10,10,10],[10,0,10,10,10,10,10,10,10,10,10,10],[10,0,10,10,10,10,10,10,10,10,10,10],[10,0,10,10,10,10,10,10,10,10,10,10],[0,0,10,10,10,10,10,10,10,10,10,10],[0,0,10,10,10,10,10,10,10,10,10,10],[10,0,10,10,10,10,10,10,10,10,10,10],[10,0,10,10,10,10,10,10,10,10,10,10],[10,0,10,10,10,10,10,10,10,10,10,10],[10,0,10,10,10,10,10,0,10,10,10,10],[10,0,10,10,10,10,10,0,10,10,10,10],[10,0,0,0,0,0,0,0,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10]],src:"".concat(W,"/town_south.png"),backgroundColor:"#ffffff",audioSrc:q},Kt={tiles:[[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,0,10,0,0,10,10,10,10,10,0,0,10],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,10],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,10],[10,10,10,10,10,10,10,0,0,0,0,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,0,0,0,0,10,10,10,10,10,10,10],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,10,10],[10,10,10,10,10,10,10,0,0,0,0,0,10,10,0,0,0,0],[10,10,10,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,0,0],[10,10,10,10,10,10,10,0,0,0,0,0,0,10,10,10,10,10],[10,10,10,10,10,10,10,0,0,0,0,0,0,10,10,10,10,10],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,10,10,0,0,0,0,0,0,0,0,0,10,10,0,0,0],[0,0,0,10,10,0,0,0,0,0,0,0,10,10,0,0,0,0],[0,0,0,0,0,0,0,10,0,10,10,0,0,0,0,0,0,0]],src:"".concat(W,"/library.png"),backgroundColor:"#ffffff",audioSrc:te},Vt={tiles:[[10,10,10,10,10],[0,0,0,0,10],[10,0,0,0,10],[0,0,0,0,0],[0,10,0,10,0]],src:"".concat(W,"/gameroom.png"),backgroundColor:"#ffffff",audioSrc:ae},Xt={name:"library",map:Kt,player:{position:[16,8],direction:"UP"},npc:[{id:0,name:"Jordan",skin:xt.kid_2,direction:v,stationary:!1,pathArr:[[14,0],[14,1],[14,2]],frameInterval:100,moveInterval:500,waitInterval:3e3,battle:!0,level:3,battlerType:"NON_GANG_MEMBER"},{id:1,name:"Prick",skin:xt.friend_5,direction:g,stationary:!1,pathArr:[[14,16]],frameInterval:100,moveInterval:500,waitInterval:6e3},{id:2,name:"Pom",skin:xt.friend_3,direction:f,stationary:!1,pathArr:[[14,17]],frameInterval:100,moveInterval:500,waitInterval:6e3},{id:3,name:"Bam",skin:xt.friend_6,direction:v,stationary:!1,pathArr:[[10,13],[10,14],[9,14]],frameInterval:100,moveInterval:500,waitInterval:6e3},{id:4,name:"Boo",skin:xt.friend_2,direction:v,stationary:!1,pathArr:[[7,16]],frameInterval:100,moveInterval:500,waitInterval:6e3},{id:5,name:"Tori",skin:xt.kid_3,direction:w,stationary:!1,pathArr:[[8,0]],frameInterval:100,moveInterval:500,waitInterval:6e3,battle:!0,level:2,battlerType:"NON_GANG_MEMBER"},{id:6,name:"Ghissu",skin:xt.kid_1,direction:g,stationary:!1,pathArr:[[4,3],[4,4],[4,5]],frameInterval:100,moveInterval:500,waitInterval:1500,talkFlag:!1}],gameobjects:[],portals:[{position:[4,15],type:Gt[0],rotate:0,target:{name:"gameroom",map:Vt,player:{position:[3,2],direction:"UP"},npc:[{id:0,name:"Razor",skin:xt.tribe_3,direction:v,stationary:!1,pathArr:[[1,2]],frameInterval:100,moveInterval:500,waitInterval:6e3,battle:!0,level:4,battlerType:x,battleMusic:le},{id:1,name:"Prick",skin:xt.friend_1,direction:w,stationary:!1,pathArr:[[1,0]],frameInterval:100,moveInterval:500,waitInterval:6e3,battle:!0,level:3,battlerType:"NON_GANG_MEMBER"},{id:2,name:"Abu",skin:xt.friend_4,direction:v,stationary:!1,pathArr:[[3,0]],frameInterval:100,moveInterval:500,waitInterval:6e3},{id:3,name:"LT",skin:xt.friend_7,direction:v,stationary:!1,pathArr:[[3,4]],frameInterval:100,moveInterval:500,waitInterval:6e3,talkFlag:!1}],gameobjects:[],portals:[{position:[4,2],type:Gt[1],rotate:90}]}},{position:[17,8],type:Gt[1],rotate:90}]},qt={tiles:[[10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,0,10,10,10,10,10,10],[10,0,0,0,0,0,0,0,0,0,0,0,10],[10,10,0,0,0,10,0,10,0,0,0,10,10],[10,10,10,0,10,10,0,10,0,0,10,10,10],[10,10,10,10,10,10,0,10,10,10,10,10,10],[10,10,10,10,10,10,0,10,10,10,10,10,10],[10,10,10,10,10,10,0,10,10,10,10,10,10],[10,10,0,0,10,10,0,10,10,0,0,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10,10,10,10]],src:"".concat(W,"/hotel.png"),backgroundColor:"#ffffff",audioSrc:ee},Qt={name:"townCenter",map:Yt,player:{position:[14,15],direction:"RIGHT"},npc:[{id:0,name:"Frank",skin:xt.friend_5,direction:f,stationary:!1,pathArr:[[14,16],[14,15]],frameInterval:100,moveInterval:500,waitInterval:2e3,talkFlag:!1},{id:1,name:"Tia",skin:xt.crush_4,direction:g,stationary:!1,pathArr:[[7,6],[7,7]],frameInterval:100,moveInterval:500,waitInterval:2e3,talkFlag:!1},{id:2,name:"Nathan",skin:xt.friend_2,direction:w,stationary:!1,pathArr:[[3,6],[4,6]],frameInterval:100,moveInterval:500,waitInterval:1500,battle:!0,level:1,battlerType:"NON_GANG_MEMBER"},{id:3,name:"Tracer",skin:xt.friend_7,direction:w,stationary:!1,pathArr:[[11,2],[12,2],[13,2],[14,2],[14,3]],frameInterval:100,moveInterval:500,waitInterval:1500,talkFlag:!1},{id:4,name:"Sean",skin:xt.chef,direction:f,stationary:!1,pathArr:[[21,11],[21,12],[21,13]],frameInterval:100,moveInterval:500,waitInterval:3e3,talkFlag:!1},{id:5,name:"Gambit",skin:xt.tribe_2,direction:g,stationary:!1,pathArr:[[20,15]],frameInterval:100,moveInterval:500,waitInterval:1500,battle:!0,level:4,battlerType:x,battleMusic:le},{id:6,name:"Rocky",skin:xt.friend_8,direction:f,stationary:!1,pathArr:[[20,16]],frameInterval:100,moveInterval:500,waitInterval:3e3},{id:7,name:"Chop",skin:xt.bully_1,direction:g,stationary:!1,pathArr:[[20,20],[20,21],[21,21]],frameInterval:100,moveInterval:500,waitInterval:1500,battle:!0,level:2,battlerType:"NON_GANG_MEMBER"}],gameobjects:[],portals:[{position:[12,15],type:Gt[0],rotate:270,target:Ft},{position:[6,10],type:Gt[0],rotate:270,target:Ht},{position:[19,0],type:Gt[0],rotate:180,target:Jt},{position:[14,21],type:Gt[0],rotate:0,target:{name:"townSouth",map:$t,player:{position:[14,1],direction:"RIGHT"},npc:[{id:0,name:"Molly",skin:xt.crush_2,direction:f,stationary:!1,pathArr:[[6,3],[6,4]],frameInterval:100,moveInterval:500,waitInterval:2e3,talkFlag:!1},{id:1,name:"Chambers",skin:xt.friend_2,direction:f,stationary:!1,pathArr:[[4,11]],frameInterval:100,moveInterval:500,waitInterval:2e3},{id:2,name:"Ozil",skin:xt.friend_3,direction:g,stationary:!1,pathArr:[[4,10]],frameInterval:100,moveInterval:500,waitInterval:2e3},{id:3,name:"Grindel",skin:xt.friend_8,direction:g,stationary:!1,pathArr:[[1,8],[2,8],[2,9],[1,9]],frameInterval:100,moveInterval:500,waitInterval:2e3,battle:!0,level:3,battlerType:"NON_GANG_MEMBER"}],gameobjects:[],portals:[{position:[4,5],type:Gt[0],rotate:270,target:Xt},{position:[19,7],type:Gt[0],rotate:270,target:{name:"hotel",map:qt,player:{position:[11,6],direction:"UP"},npc:[{id:0,name:"Cruz",skin:xt.friend_2,direction:g,stationary:!0,pathArr:[[12,2]],frameInterval:100,moveInterval:500,waitInterval:3e3},{id:1,name:"Lillie",skin:xt.crush_1,direction:f,stationary:!0,pathArr:[[12,3]],frameInterval:100,moveInterval:500,waitInterval:3e3},{id:2,name:"Lil",skin:xt.kid_2,direction:g,stationary:!1,pathArr:[[12,9],[12,10]],frameInterval:100,moveInterval:500,waitInterval:3e3},{id:3,name:"Wayne",skin:xt.friend_7,direction:w,stationary:!0,pathArr:[[8,3]],frameInterval:100,moveInterval:500,waitInterval:3e3},{id:4,name:"Spark",skin:xt.kid_3,direction:g,stationary:!1,pathArr:[[8,8],[8,9]],frameInterval:100,moveInterval:500,waitInterval:2e3},{id:5,name:"Sparkle",skin:xt.whitepuppy,direction:g,stationary:!1,pathArr:[[6,9],[6,10]],frameInterval:100,moveInterval:500,waitInterval:2e3},{id:6,name:"Snyder",skin:xt.tribe_5,direction:g,stationary:!1,pathArr:[[6,8]],frameInterval:100,moveInterval:500,waitInterval:3e3,battle:!0,level:5,battlerType:x,battleMusic:le},{id:7,name:"Weisley",skin:xt.bully_1,direction:f,stationary:!0,pathArr:[[6,11]],frameInterval:100,moveInterval:500,waitInterval:3e3},{id:8,name:"Rose",skin:xt.crush_3,direction:w,stationary:!0,pathArr:[[5,6]],frameInterval:100,moveInterval:500,waitInterval:3e3,talkFlag:!1},{id:9,name:"Max",skin:xt.friend_6,direction:g,stationary:!1,pathArr:[[7,2],[7,4]],frameInterval:100,moveInterval:500,waitInterval:3e3,battle:!0,level:4,battlerType:"NON_GANG_MEMBER"}],gameobjects:[],portals:[{position:[12,6],type:Gt[1],rotate:90}]}},{position:[14,0],type:Gt[1],rotate:180}]}}]},Zt=function(e){return r.a.createElement("div",{style:{width:"100%",height:"100%",backgroundImage:"linear-gradient(#991b1e, #b61d20, #991b1e)"}},r.a.createElement("div",{id:"loading",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",padding:"5px",alignItems:"center"}},r.a.createElement("div",{style:{}},r.a.createElement("img",{className:"rotate",style:{width:250,height:250},src:"".concat(Y,"/loading.png"),alt:"Loading"})),r.a.createElement("p",{style:{fontSize:ue(2.5),fontFamily:"gameboy",color:"white"}}," ",e.msg,"...")))},ea=a(13),ta=a.n(ea),aa=a(15);function na(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ra(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?na(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):na(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var oa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).timeout=null,a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(){this.props.blink&&(this.timeout=setTimeout(function(){this.hb.classList.add("blinkmomentary")}.bind(this),600))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this;return this.hb&&this.hb.classList.remove("blinkmomentary"),r.a.createElement("div",{ref:function(t){return e.hb=t},style:{width:"90%",height:"50%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("div",{style:{fontSize:ue(2),marginRight:"10px"}},"HP"),r.a.createElement("div",{style:ra({width:"90%",height:"30%"},Oe(1,"white",0),{backgroundColor:"white"})},r.a.createElement("div",{style:ra({position:"relative",width:"".concat(this.props.currhealth/this.props.maxhealth*100,"%"),height:"100%"},Oe(0,"white",0),{backgroundImage:"linear-gradient(mediumseagreen, forestgreen, mediumseagreen)"})},r.a.createElement("div",{style:{position:"absolute",left:"40%",top:"15%",fontSize:ue(2)}},Math.floor(this.props.currhealth/this.props.maxhealth*100),"%"))))}}]),t}(n.Component),ia=function(e){var t=ra({width:"40%",height:"100%",backgroundColor:Ie(e.player.level)},Oe(2,"black",5),{color:"black",fontSize:ue(2.5),fontFamily:"gameboy_lg",display:"flex",flexDirection:e.reverse?"row-reverse":"row",justifyContent:"space-between"});return r.a.createElement("div",{style:t},r.a.createElement("div",{style:ra({width:"30%",height:"90%",alignSelf:"center",margin:"5px"},ke("".concat(e.player.src,"/head.png"),"lightgrey"),{},Oe(2,"grey",5))}),r.a.createElement("div",{style:{width:"70%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignSelf:"center",margin:"5px"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",null,e.player.name),r.a.createElement("div",{style:{color:"yellow",fontSize:ue(2)}},"Lvl:",e.player.level)),r.a.createElement(oa,{maxhealth:e.player.maxLives,currhealth:e.player.lives,blink:e.blink})))},la=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).timeout=[],a.className=a.props.reverse?"moveInRL":"moveInLR",a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.image.style.backgroundImage="url('".concat(Y,"/").concat(nt(this.props.move),".png')"),this.image.classList.add(this.className)}},{key:"componentDidUpdate",value:function(){this.timeout=[],this.timeout.push(setTimeout(function(){this.image&&(this.image.style.backgroundImage="url('".concat(Y,"/").concat(nt(this.props.move),".png')"),this.image.classList.add(this.className))}.bind(this),50)),this.props.blink&&this.timeout.push(setTimeout(function(){this.image&&this.image.classList.add("blinkmomentary")}.bind(this),600))}},{key:"componentWillUnmount",value:function(){this.timeout.map(function(e){return clearTimeout(e)})}},{key:"render",value:function(){var e=this,t={width:"100%",height:"100%",position:"absolute",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain",transform:this.props.reverse?"rotate(180deg)":"rotate(0deg)"};return this.image&&(this.image.classList.remove(this.className),this.image.classList.remove("blinkmomentary")),r.a.createElement("div",{style:{position:"relative",width:"50%",height:"100%"}},r.a.createElement("div",{ref:function(t){return e.image=t},style:t}))}}]),t}(n.Component),sa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).timeout=null,a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"animateText",value:function(e){var t=0,a=this.p,n=function(){t>e.length||(a.innerHTML=e.substring(0,t),t++,this.timeout=setTimeout(n,10))}.bind(this);n()}},{key:"componentDidMount",value:function(){this.animateText(this.props.summary)}},{key:"componentDidUpdate",value:function(){clearTimeout(this.timeout),this.animateText(this.props.summary)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t={border:"10px solid #db5435",borderRadius:"20px",width:"70%",padding:"5px",backgroundColor:"#639aa1",color:"white",fontSize:ue(3),fontFamily:"gameboy",overflowWrap:"break-word"};return r.a.createElement("div",{id:"summary",style:t},r.a.createElement("p",{ref:function(t){return e.p=t}}))}}]),t}(n.Component),ca=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleKeyDown=a.handleKeyDown.bind(Object(h.a)(a)),a.handleTouchEnd=a.handleTouchEnd.bind(Object(h.a)(a)),a.continue=!1,a.continueKey=aa.isMobile?"TAP":"SPACE",1===a.props.winner?(a.winnerStr="".concat(a.props.player.name," WON!"),a.winnerClass="wonBlink"):(a.winnerStr="".concat(a.props.player.name," LOST!"),a.winnerClass="lostBlink"),a.levelColor=Ie(a.props.player.level),a.levelArrow=a.props.player.level>a.props.player.initialStats.level?' <i class="fa fa-arrow-up blink"></i>':"",a.animateText=a.animateText.bind(Object(h.a)(a)),a.timeout=null,a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"handleKeyDown",value:function(e){T.includes(e.keyCode)&&this.continue&&this.props.closeBattle()}},{key:"handleTouchEnd",value:function(){this.props.closeBattle()}},{key:"animateText",value:function(e,t,a,n,r,o){var i=function(){t>a?1===++o?this.timeout=setTimeout(function(){this.animateText("Exp",this.props.player.initialStats.exp,this.props.player.exp,40,this.exp,o)}.bind(this),200):2===o?this.timeout=setTimeout(function(){this.animateText("Level",this.props.player.initialStats.level,this.props.player.level,100,this.level,o)}.bind(this),200):3===o&&(this.level.style.color=this.levelColor,this.level.innerHTML+=this.levelArrow,this.cont.style.opacity=1,this.continue=!0):(Te(H),r.innerHTML="".concat(e,": ").concat(t),t++,this.timeout=setTimeout(i,n))}.bind(this);i()}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("touchend",this.handleTouchEnd),this.timeout=setTimeout(function(){this.animateText("Score",0,this.props.player.score,40,this.score,0)}.bind(this),600)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("touchend",this.handleTouchEnd)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"battleEnd",className:"moveInLR",style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",fontSize:ue(2.5),fontFamily:"gameboy",backgroundImage:"repeating-linear-gradient(#def3c6, #def3c6 20px, #e7f6db 20px, #e7f6db 23px)"}},r.a.createElement("div",{style:{width:"100%",height:"60%",display:"flex",justifyContent:"center"}},r.a.createElement("div",{style:ra({width:"60%",height:"100%",display:"flex",justifyContent:"center",backgroundColor:"#f7f8f7"},Oe(10,"#00b1b7",10),{color:"#5d5f5b"})},r.a.createElement("div",{style:{width:"40%",height:"60%",display:"flex",flexDirection:"column",alignSelf:"center"}},r.a.createElement("div",{style:ra({width:"240px",height:"240px",alignSelf:"center"},ke("".concat(this.props.player.src,"/head.png"),"lightgrey"),{},Oe(2,"grey",5))}),r.a.createElement("div",{style:{alignSelf:"center",fontSize:ue(3)}},this.props.player.name)),r.a.createElement("div",{style:{width:"50%",height:"60%",display:"flex",flexDirection:"column",alignSelf:"center",fontSize:ue(2.5)}},r.a.createElement("div",{className:this.winnerClass,style:{alignSelf:"center",fontSize:ue(3.5),marginBottom:"20px"}},this.winnerStr),r.a.createElement("div",{ref:function(t){return e.score=t},style:{margin:"5px 0px 0px 10px"}}),r.a.createElement("div",{ref:function(t){return e.exp=t},style:{margin:"5px 0px 0px 10px"}}),r.a.createElement("div",{ref:function(t){return e.level=t},style:{margin:"5px 0px 0px 10px",color:this.levelColor}})))),r.a.createElement("div",{className:"blinkContinue",ref:function(t){return e.cont=t},style:{alignSelf:"center",marginTop:"40px",opacity:0,color:"#5d5f5b"}},Ee(this.continueKey,25)," to continue..."))}}]),t}(n.Component),pa=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e={position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",fontFamily:"gameboy",fontSize:ue(6),backgroundColor:"white"};return r.a.createElement("div",{id:"battleIntro",style:e},r.a.createElement("div",{style:{position:"relative",height:"35%",backgroundColor:"lightgrey"}},r.a.createElement("div",{className:"battleIntroRL",style:ra({position:"absolute",top:"30%",width:"120px",height:"120px"},ke("".concat(this.props.npc.src,"/head.png")),{backgroundColor:"lightgrey"})})),r.a.createElement("div",{style:{position:"relative",height:"30%",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{className:"battleIntroVS"},"VS")),r.a.createElement("div",{style:{position:"relative",height:"35%",backgroundColor:"lightgrey"}},r.a.createElement("div",{className:"battleIntroLR",style:ra({position:"absolute",top:"30%",width:"120px",height:"120px"},ke("".concat(this.props.player.src,"/head.png")),{backgroundColor:"lightgrey"})})))}}]),t}(n.Component),ua=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleMoveSelect=a.handleMoveSelect.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"handleMoveSelect",value:function(e){for(var t=document.getElementsByClassName("move"),a=0;a<t.length;a++)t[a].disabled=!0;this.props.submitMove(e),setTimeout(function(){for(var e=document.getElementsByClassName("move"),t=0;t<e.length;t++)e[t].disabled=!1},1100)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"battle",style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",backgroundImage:"repeating-linear-gradient(#def3c6, #def3c6 20px, #e7f6db 20px, #e7f6db 23px)"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",height:"25%",marginBottom:"5px"}},r.a.createElement(ia,{player:this.props.battle.player,reverse:!1,blink:-1===this.props.battle.lastWinner}),r.a.createElement(ia,{player:this.props.battle.npc,reverse:!0,blink:1===this.props.battle.lastWinner})),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",height:"50%",marginBottom:"5px"}},r.a.createElement(la,{move:this.props.battle.player.lastMove,reverse:!1,blink:-1===this.props.battle.lastWinner}),r.a.createElement(la,{move:this.props.battle.npc.lastMove,reverse:!0,blink:1===this.props.battle.lastWinner})),r.a.createElement("div",{style:{display:"flex",width:"100%",height:"25%"}},r.a.createElement("div",{style:ra({display:"flex",flexDirection:"column",justifyContent:"space-around",flexWrap:"nowrap",width:"30%",backgroundColor:"#f9f6d6"},Oe(8,"#4d655e",10))},r.a.createElement("button",{className:"move",onClick:function(){return e.handleMoveSelect(0)},style:{height:"32%",fontFamily:"gameboy_lg",fontSize:ue(3)}},"Rock"),r.a.createElement("button",{className:"move",onClick:function(){return e.handleMoveSelect(1)},style:{height:"32%",fontFamily:"gameboy_lg",fontSize:ue(3)}},"Paper"),r.a.createElement("button",{className:"move",onClick:function(){return e.handleMoveSelect(2)},style:{height:"32%",fontFamily:"gameboy_lg",fontSize:ue(3)}},"Scissors")),r.a.createElement(sa,{summary:this.props.battle.summary})))}}]),t}(n.Component),da=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.battle.inIntro&&setTimeout(function(){this.props&&this.props.endIntro()}.bind(this),3e3)}},{key:"render",value:function(){var e=null,t=null;return this.props.battle.inIntro?(e=r.a.createElement(pa,{player:this.props.battle.player,npc:this.props.battle.npc}),t=r.a.createElement(ta.a,{src:this.props.battle.music,loop:!0,html5:!1,volume:.5})):this.props.battle.inEnd?(e=r.a.createElement(ca,{player:this.props.battle.player,winner:this.props.battle.finalWinner,closeBattle:this.props.closeBattle}),t=r.a.createElement(ta.a,{src:se,volume:.3})):(e=r.a.createElement(ua,{battle:this.props.battle,submitMove:this.props.submitMove}),t=r.a.createElement(ta.a,{src:this.props.battle.music,loop:!0,html5:!1,volume:.5})),r.a.createElement("div",null,e,t)}}]),t}(n.Component),ha=Object(l.b)(function(e){return{battle:e.battle}},function(e){return{submitMove:function(t){e(rt(parseInt(t)))},endIntro:function(){e({type:"END_BATTLE_INTRO"})},closeBattle:function(){e(function(e,t){var a=Ce(t().npc.list,t().battle.npc.id),n=t().player,r=t().viewport.viewportDims[1];e(ct()),1===t().battle.finalWinner?e(kt(a.id,{name:a.name,dialogs:Se[a.name].battleLose.map(function(e){return e.replace("$PLAYERNAME",n.name)})},{name:n.name,dialogs:De[a.name].battleWin.map(function(e){return e.replace("$PLAYERNAME",n.name)})},de(n.position,t().viewport.start)[1]>r/3?"top":"bottom",!1)):e(kt(a.id,{name:a.name,dialogs:Se[a.name].battleWin.map(function(e){return e.replace("$PLAYERNAME",n.name)})},{name:n.name,dialogs:De[a.name].battleLose.map(function(e){return e.replace("$PLAYERNAME",n.name)})},de(n.position,t().viewport.start)[1]>r/3?"top":"bottom",!1))})}}})(da),ma=a(11),ba=a(10);function ya(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function fa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ya(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ya(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ga=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white";return fa({padding:"5px",backgroundColor:e},Oe(2,t,5))},va=function(e){var t=null!==e.player.nearbyNPC?r.a.createElement("div",null,aa.isMobile?Ee("TAP"):Ee("SPACE")," to talk"):null;return t=null!==e.player.nearbyGameObj?r.a.createElement("div",null,Ee("P")," to pickup"):t,r.a.createElement("div",{id:"aware",style:{display:e.player.interacting?"none":"block"}},t)},wa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSaveBtnClick=a.handleSaveBtnClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"handleSaveBtnClick",value:function(){this.props.saveGame()}},{key:"render",value:function(){var e,t={width:this.props.width,height:80,margin:"auto",marginTop:"20px",borderLeft:"10px solid white",borderRight:"10px solid white",borderTop:"5px solid white",backgroundColor:"lightgrey",color:"black",fontFamily:"gameboy",fontSize:ue(1.5),display:"flex",justifyContent:"space-between",alignItems:"center"},a=this.props.player.battle.level,n=(e=100*this.props.player.battle.won/(this.props.player.battle.won+this.props.player.battle.lost),isNaN(e)?0:Math.round(e));return r.a.createElement("div",{id:"stats",style:t},r.a.createElement("div",{style:{width:"55%",display:"flex",alignItems:"center"}},r.a.createElement("div",{style:fa({width:80,height:80},ke("".concat(this.props.player.skin.src,"/head.png")),{backgroundColor:"lightgrey"})}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement("div",{style:{margin:"5px",alignSelf:"flex-start"}}," ",this.props.player.name," "),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:fa({margin:"5px",alignSelf:"flex-end"},ga(Ie(a)))}," Lvl:",a," "),r.a.createElement("div",{style:fa({margin:"5px",alignSelf:"flex-end"},ga(Ie(a)))}," Exp:",this.props.player.battle.exp," "),r.a.createElement("div",{style:fa({margin:"5px",alignSelf:"flex-end"},ga(Ae(n)))}," Win%:",n),r.a.createElement("div",{style:fa({margin:"5px",alignSelf:"flex-end"},ga("orange"))},"Tribes Defeated: ".concat(Object.keys(this.props.player.battle.defeatedGangMembers).length,"/").concat(5))))),r.a.createElement("div",{style:fa({width:"35%",height:"70%"},Oe(2,"#DB5435",10),{backgroundColor:"#639AA1",color:"white",display:"flex",flexDirection:"column",justifyContent:"center",paddingLeft:"10px"})},r.a.createElement(va,{player:this.props.player})),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("button",{disabled:this.props.player.isAnimating||this.props.player.frozen||this.props.player.inBattle||this.props.player.interacting,style:fa({margin:"5px"},ga("#FD974F","#57ABB3"),{backgroundColor:"#FD974F",fontFamily:"gameboy"}),onClick:this.handleSaveBtnClick},r.a.createElement(ma.a,{style:{color:"white",marginBottom:"4px"},size:"2x",icon:ba.e})," Save")))}}]),t}(n.Component),ka=Object(l.b)(function(e){return{player:e.player}},function(e){return{saveGame:function(){e(function(e,t){e(At()),fe(),function a(){var n=t().npc.list,r=n.filter(function(e){return e.isAnimating});if(r.length>0)setTimeout(a,500);else{try{var o=JSON.stringify(t());localStorage.setItem(L,o),alert("Game saved successfully!")}catch(i){alert("Saving state failed! Try starting a new game.")}e(Dt())}}()})}}})(wa),Oa=function(e){var t=de(e.player.position,e.viewport.start),a={position:"absolute",width:e.player.skin.width,height:e.player.skin.height,backgroundImage:"url('".concat(e.player.skin.src,"/sprite.png')"),left:isNaN(t[0]+40-e.player.skin.width/2)?0:t[0]+(40-e.player.skin.width/2),top:isNaN(t[1]+40-e.player.skin.height/2)?0:t[1]+(40-e.player.skin.height/2),backgroundPosition:"".concat(e.player.walkIndex*e.player.skin.width,"px ").concat(e.player.spriteLocation*e.player.skin.height,"px"),zIndex:2},n={position:"absolute",width:25,height:25,left:t[0],top:t[1],transform:"translate(110%, -60%)",display:e.player.interacting?"none":"block"};return r.a.createElement("div",null,r.a.createElement("div",{id:"player",style:a}),r.a.createElement("div",{style:n},r.a.createElement(ma.a,{className:"wind",style:{color:Ie(e.player.battle.level),position:"absolute",left:"50%",top:"50%"},icon:ba.a,size:"2x"})))},Ea=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Oa,{player:this.props.player,viewport:this.props.viewport})}}]),t}(n.Component),Ia=Object(l.b)(function(e){return{player:e.player}})(Ea);function Aa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ta(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Aa(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Aa(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Da=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).battlerMarkerIcon=ba.d,a.props.self.battle&&(a.props.self.battlerType!==N&&a.props.self.battlerType!==x||(a.battlerMarkerIcon=ba.f)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){ye(this.props.updateNPCPosition.bind(this),this.props.self.moveInterval,this.props.self.id)}},{key:"componentDidUpdate",value:function(){this.props.frozen||"_"+this.props.self.id in be||ye(this.props.updateNPCPosition.bind(this),this.props.self.moveInterval,this.props.self.id)}},{key:"render",value:function(){var e={position:"absolute",width:this.props.self.skin.width,height:this.props.self.skin.height,backgroundImage:"url('".concat(this.props.self.skin.src,"/sprite.png')"),left:this.props.self.position[0]+(40-this.props.self.skin.width/2),top:this.props.self.position[1]+(40-this.props.self.skin.height/2),backgroundPosition:"".concat(this.props.self.walkIndex*this.props.self.skin.width,"px ").concat(this.props.self.spriteLocation*this.props.self.skin.height,"px")},t={position:"absolute",width:25,height:25,left:this.props.self.position[0],top:this.props.self.position[1],transform:"translate(100%, -100%)",display:!this.props.self.interacting&&this.props.self.battle&&0===this.props.self.defeatedCount?"block":"none"},a={position:"absolute",width:25,height:25,left:this.props.self.position[0],top:this.props.self.position[1],transform:"translate(100%, -100%)",display:this.props.self.interacting||this.props.self.talkFlag?"none":"block"};return r.a.createElement("div",null,r.a.createElement("div",{id:"NPC".concat(this.props.self.id),style:e}),r.a.createElement("div",{className:"blink",style:t},r.a.createElement("div",{style:Ta({position:"relative",width:"100%",height:"100%",textAlign:"center",backgroundColor:Ie(this.props.self.level)},Oe(1,"black",5))},r.a.createElement(ma.a,{icon:this.battlerMarkerIcon}))),r.a.createElement("div",{className:"blink",style:a},r.a.createElement(ma.a,{style:{color:"white",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},size:"lg",icon:ba.c})))}}]),t}(n.Component),Sa=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){fe()}},{key:"render",value:function(){var e=this,t=this.props.npc.list.map(function(t){return r.a.createElement(Da,{self:t,key:t.id,updateNPCPosition:e.props.updateNPCPosition,frozen:e.props.npc.frozen})});return r.a.createElement("ul",{id:"NPCList"},t)}}]),t}(n.Component),ja=Object(l.b)(function(e){return{npc:e.npc}},function(e){return{updateNPCPosition:function(){e(Xe(this.props.self.id))}}})(Sa),Pa=function(e){var t={position:"absolute",width:e.self.type.width,height:e.self.type.height,backgroundImage:"url('".concat(e.self.type.src,"')"),left:e.self.position[0]+(40-e.self.type.width/2),top:e.self.position[1]+(40-e.self.type.height/2),backgroundPosition:"".concat(e.self.type.srcpos[0],"px ").concat(e.self.type.srcpos[1],"px"),backgroundSize:"contain",transform:"rotate(".concat(e.self.rotate,"deg)")};return r.a.createElement("div",{id:"GObj".concat(e.self.id),className:e.self.type.effects,style:t})},_a=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.gameobjects.map(function(e){return r.a.createElement(Pa,{self:e,key:e.id})});return r.a.createElement("ul",{id:"GameObjList"},e)}}]),t}(n.Component),Na=Object(l.b)(function(e){return{gameobjects:e.gameobjects}},function(e){return{}})(_a),xa=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"map",ref:function(t){return e.map=t},style:{width:this.props.map.width,height:this.props.map.height,left:"".concat(this.props.viewport.start[0],"px"),top:"".concat(this.props.viewport.start[1],"px"),position:"absolute",backgroundImage:"url('".concat(this.props.map.src,"')"),backgroundRepeat:"no-repeat",backgroundColor:"black"}},r.a.createElement(Na,null),r.a.createElement(ja,null),r.a.createElement(ta.a,{src:this.props.map.audioSrc,loop:!0,volume:.4,html5:!1}))}}]),t}(n.Component);function La(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ra=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).animateConversation=a.animateConversation.bind(Object(h.a)(a)),a.timeout=null,a.next=aa.isMobile?"TAP":"SPACE",a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"animateConversation",value:function(e,t,a,n,r){var o=function(){if(!(n>a.length)){if(e!==this.props.speakerIdx)return 0===e?void(r.innerHTML=t+": "+a):void(r.innerHTML="");r.innerHTML=t+": "+a.substring(0,n),n++,this.timeout=setTimeout(o,25)}}.bind(this);o()}},{key:"cleanBoard",value:function(){this.p1.innerHTML="",this.p2.innerHTML=""}},{key:"componentDidUpdate",value:function(){if(this.props.isOpen)if(0===this.props.speakerIdx){var e=this.props.person1;this.cleanBoard(),this.animateConversation(0,e.name,e.dialogs[this.props.dialogIdx],1,this.p1)}else{var t=this.props.person2;this.animateConversation(1,t.name,t.dialogs[this.props.dialogIdx],1,this.p2)}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t={};"top"===this.props.position?t.top=0:t.bottom=0;var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?La(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):La(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({position:"absolute",height:"25%",border:"10px solid #00b4bc",left:0,right:0,borderRadius:"10px",padding:"5px",backgroundColor:"#f7f8f7",color:"#5d5f5b",fontSize:ue(2),fontFamily:"gameboy_lg",display:this.props.isOpen?"block":"none",overflowWrap:"break-word"},t);return r.a.createElement("div",{id:"conversation",style:a},r.a.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},r.a.createElement("p",{ref:function(t){return e.p1=t}}),r.a.createElement("p",{ref:function(t){return e.p2=t}}),r.a.createElement("div",{className:"blink",style:{position:"absolute",right:20,bottom:20}},Ee(this.next))))}}]),t}(n.Component),Ca=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.dialog;return r.a.createElement(Ra,{isOpen:e.isOpen,position:e.position,person1:e.person1,person2:e.person2,dialogIdx:e.dialogIdx,speakerIdx:e.speakerIdx})}}]),t}(n.Component),Ma=Object(l.b)(function(e){return{dialog:e.dialog}})(Ca);var Wa=function(e){var t={backgroundImage:"url('".concat(e.self.src,"')"),backgroundPosition:"".concat(e.self.srcpos[0],"px ").concat(e.self.srcpos[1],"px"),width:e.self.width,height:e.self.height,position:"absolute",left:60-e.self.width/2,top:60-e.self.height/2};return r.a.createElement("div",{className:"inventorybtn"},r.a.createElement("div",{style:t}),r.a.createElement("p",{style:{fontSize:ue(2),position:"absolute",margin:"5px",left:5,bottom:5}},e.count))},Ga=function(e){var t=function(e){var t,a={},n=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0)(t=i.value).type.name in a?a[t.type.name]+=1:a[t.type.name]=1}catch(s){r=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}(e.inventorylist),a=Wt.filter(function(t){return t.type===e.type}).map(function(e){return r.a.createElement(Wa,{self:e,key:e.id,count:e.name in t?t[e.name]:0})});return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",margin:"5px",padding:"6px",backgroundColor:"forestgreen",boxShadow:"inset 0 0 5px black",borderRadius:"10px"}},r.a.createElement("div",{style:{writingMode:"vertical-lr",textOrientation:"sideways-right",margin:"auto 5px",padding:"5px"}},e.type),a)},Ya=function(e){var t={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",backgroundColor:"darkgreen",border:"5px solid white",borderRadius:"10px",boxShadow:"inset 0 0 5px black",fontFamily:"gameboy",color:"white",padding:"5px",zIndex:5,display:e.inventory.isOpen?"inline-block":"none"};return r.a.createElement("div",{id:"inventory",style:t},r.a.createElement("div",{style:{fontSize:ue(2),padding:"5px",margin:"5px",textAlign:"center"}},r.a.createElement("p",{style:{fontSize:ue(2),padding:"3px",margin:"0px",display:"inline-block",border:"2px groove white"}},"Inventory")),r.a.createElement("div",{style:{display:"flex",padding:"5px",flexDirection:"column",justifyContent:"center"}},r.a.createElement(Ga,{type:"HEALER",inventorylist:e.inventory.HEALER}),r.a.createElement(Ga,{type:"EATABLE",inventorylist:e.inventory.EATABLE}),r.a.createElement(Ga,{type:"CURRENCY",inventorylist:e.inventory.CURRENCY})))},Fa=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(Ya,{inventory:this.props.inventory})}}]),t}(n.Component),Ha=Object(l.b)(function(e){return{inventory:e.inventory}})(Fa);function Ba(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ua(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ba(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ba(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var za=function(e,t){return Ua({padding:"5px",backgroundColor:e},Oe(2,t,5))},Ja=function(e){var t=Ua({position:"absolute",width:600,height:250},Oe(5,"grey",5),{left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:5,backgroundColor:"whitesmoke",display:e.show?"flex":"none",flexDirection:"column",justifyContent:"space-around",alignItems:"center",fontFamily:"gameboy",fontSize:ue(2.5)});return r.a.createElement("div",{style:t},r.a.createElement("p",{style:{color:"black"}},"Exit to Main Menu?"),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{style:Ua({width:"230px",fontFamily:"gameboy",fontSize:ue(2.3)},za("MediumSeaGreen","green"),{margin:"10px"}),onClick:e.confirmLink},"Confirm ",r.a.createElement(ma.a,{style:{color:"white"},size:"1x",icon:ba.b})),r.a.createElement("button",{style:Ua({width:"230px",fontFamily:"gameboy",fontSize:ue(2.3)},za("OrangeRed","red"),{margin:"10px"}),onClick:e.cancelLink},"Cancel ",r.a.createElement(ma.a,{style:{color:"white"},size:"1x",icon:ba.g}))))},$a=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).touchstartX=null,a.touchstartY=null,a.touchendX=null,a.touchendY=null,a.handleKeyDown=a.handleKeyDown.bind(Object(h.a)(a)),a.handleTouchStart=a.handleTouchStart.bind(Object(h.a)(a)),a.handleTouchMove=a.handleTouchMove.bind(Object(h.a)(a)),a.handleTouchEnd=a.handleTouchEnd.bind(Object(h.a)(a)),a.toggleExitModalState=a.toggleExitModalState.bind(Object(h.a)(a)),a.state={showExitModal:!1},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("touchstart",this.handleTouchStart,!1),window.addEventListener("touchmove",this.handleTouchMove,!1),window.addEventListener("touchend",this.handleTouchEnd,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd)}},{key:"toggleExitModalState",value:function(){Te(U),this.setState({showExitModal:!this.state.showExitModal})}},{key:"handleTouchStart",value:function(e){e.preventDefault(),this.touchstartX=this.touchendX=e.touches[0].clientX,this.touchstartY=this.touchendY=e.touches[0].clientY}},{key:"handleTouchMove",value:function(e){e.preventDefault(),this.touchendX=e.touches[0].clientX,this.touchendY=e.touches[0].clientY;var t=this.touchendX-this.touchstartX,a=this.touchendY-this.touchstartY;Math.abs(t)>Math.abs(a)?t>0?this.props.updatePlayerPosition(E):t<80&&this.props.updatePlayerPosition(k):a>0?this.props.updatePlayerPosition(I):a<0&&this.props.updatePlayerPosition(O)}},{key:"handleTouchEnd",value:function(){var e=Math.abs(this.touchendX-this.touchstartX),t=Math.abs(this.touchendY-this.touchstartY);0===e&&0===t&&this.props.handleConversation()}},{key:"handleKeyDown",value:function(e){var t=e.keyCode;P.includes(t)&&(e.preventDefault(),e.stopImmediatePropagation(),A.includes(t)?this.props.updatePlayerPosition(t):T.includes(t)?this.props.handleConversation():D.includes(t)?this.props.pickupObject():S.includes(t)?this.props.toggleInventory():j.includes(t)&&this.toggleExitModalState())}},{key:"render",value:function(){var e=this,t={position:"relative",margin:"auto",width:this.props.width,height:this.props.height,border:"10px solid white",overflow:"hidden",backgroundColor:"black"};return r.a.createElement("div",{ref:function(t){return e.world=t},id:"world",style:t},r.a.createElement(xa,{map:this.props.map,viewport:this.props.viewport}),r.a.createElement(Ia,{viewport:this.props.viewport}),r.a.createElement(Ma,null),r.a.createElement(Ha,null),r.a.createElement(Ja,{show:this.state.showExitModal,confirmLink:this.props.handleBack,cancelLink:this.toggleExitModalState}))}}]),t}(n.Component),Ka=Object(l.b)(null,function(e){return{updatePlayerPosition:function(t){e(We(t))},handleConversation:function(){e(function(e,t){t().player.interacting?e(Ve()):e(Ke())})},pickupObject:function(){e(function(e,t){var a=t().player;if(!a.interacting){var n=null!==a.nearbyGameObj?t().gameobjects.filter(function(e){return e.id===a.nearbyGameObj}):null;null!==n&&(Te(J),e(It(n[0])),e(ft()))}})},toggleInventory:function(){e((Te(J),{type:"TOGGLE_INVENTORY_DISPLAY"}))}}})($a);function Va(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Xa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Va(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Va(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var qa=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.initViewport([this.props.width,this.props.height]),this.props.loadgame?this.props.loadGameFromDisk():this.props.loadMap(Qt)}},{key:"render",value:function(){var e={position:"relative",margin:"auto",width:this.props.width,height:this.props.height,border:"10px solid white",overflow:"hidden",backgroundColor:"black"};return this.props.map.isLoading?r.a.createElement("div",{id:"game",style:Xa({},e,{marginTop:"60px"})},r.a.createElement(Zt,{msg:"Loading Map"})):this.props.statemanager.savingState?r.a.createElement("div",{id:"game",style:Xa({},e,{marginTop:"60px"})},r.a.createElement(Zt,{msg:"Freezing state"})):this.props.battle.isOpen?r.a.createElement("div",{id:"game",style:Xa({},e,{marginTop:"60px"})},r.a.createElement(ha,{battle:this.props.battle})):r.a.createElement(r.a.Fragment,null,r.a.createElement(ka,{width:this.props.width}),r.a.createElement(Ka,{width:this.props.width,height:this.props.height,map:this.props.map,viewport:this.props.viewport,handleBack:this.props.handleBack}))}}]),t}(n.Component),Qa=Object(l.b)(function(e){return{map:e.map,viewport:e.viewport,battle:e.battle,statemanager:e.statemanager}},function(e){return{loadMap:function(t){e(Ze(t))},loadGameFromDisk:function(){e(function(e){try{var t=localStorage.getItem(L);if(null===t)return;var a=JSON.parse(t);e(Pt());var n=new Image;n.onload=function(){e(jt(a))},n.src=a.map.src}catch(r){return void alert("Loading state failed. Start a new game!")}return 1})},initViewport:function(t){var a;e({type:"INIT_VIEWPORT_DIMS",payload:{viewportDims:a=t,camera:[[a[0]/2-160,a[0]/2+80],[a[1]/2-160,a[1]/2+80]]}})}}})(qa);function Za(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function en(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Za(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Za(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var tn=function(){try{return null!==localStorage.getItem(L)}catch(e){return alert("Issue accessing local storage. There will be problem in saving the game!"),!1}},an=function(e){var t=en({width:"350px",padding:"10px",fontFamily:"pixel",fontSize:ue(2),margin:"10px",backgroundColor:"#FD974F"},Oe(2,"#57ABB3",5)),a=en({},t,{color:"black",opacity:"0.5"});return e.disabled?r.a.createElement("button",{disabled:!0,style:a},e.title):r.a.createElement("button",{onClick:function(){e.onClick()},style:t},e.title)},nn=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:en({},{position:"absolute",left:0,top:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},{width:this.props.width,height:this.props.height})},r.a.createElement("div",{style:{position:"relative",width:"100%",height:"60%",overflow:"hidden"}},r.a.createElement("div",{className:"animateTitle",style:en({position:"absolute",width:"100%",height:"100%"},ke("".concat(Y,"/title.png"),null,"auto"))})),r.a.createElement("div",{className:"showMenu",style:{position:"relative",width:"100%",height:"40%",display:"flex",flexDirection:"column",alignItems:"center",opacity:0}},r.a.createElement(an,{title:"Start New Game",disabled:!1,onClick:this.props.startNewGame}),r.a.createElement(an,{title:"Load Game",disabled:!tn(),onClick:this.props.loadGame})))}}]),t}(n.Component);function rn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function on(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rn(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ln="".concat(Y,"/playerselect/"),sn=function(e){return r.a.createElement("div",{style:{width:220,height:300},onClick:function(){e.click(e.option)}},r.a.createElement("button",{className:e.option===e.selected?"selected":"",style:on({width:"100%",height:"100%"},ke("".concat(ln).concat(e.option,".png"),e.bgColor,"crop"))}))},cn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleCharacterClick=a.handleCharacterClick.bind(Object(h.a)(a)),a.handleNameChange=a.handleNameChange.bind(Object(h.a)(a)),a.validateAndSend=a.validateAndSend.bind(Object(h.a)(a)),a.state={character:null,name:"",errmsg:""},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"handleNameChange",value:function(e){Te(U),this.setState({name:e.target.value,errmsg:""})}},{key:"handleCharacterClick",value:function(e){Te(U),this.setState({character:e,errmsg:""})}},{key:"validateAndSend",value:function(){var e;null!==this.state.character?(e=this.state.name,/^[a-z]{3,15}$/i.test(e)?(this.props.startNewJourney(),this.props.initPlayerInfo(this.state),this.props.startJourney()):this.setState({errmsg:"Invalid Name!"})):this.setState({errmsg:"Please select an avatar!"})}},{key:"render",value:function(){var e={position:"absolute",left:"50%",marginTop:10,transform:"translate(-50%, 0%)",display:"flex",flexDirection:"column",alignItems:"center",fontFamily:"pixel",fontSize:ue(3)};return r.a.createElement("div",{className:"animateTitle",style:on({},e,{width:"100%",height:"100%"})},r.a.createElement("button",{onClick:this.props.handleBack,style:on({padding:"5px",marginLeft:"5px",backgroundColor:"#FD974F",alignSelf:"flex-start"},Oe(1,"#57ABB3",5))},r.a.createElement("i",{className:"fa fa-arrow-left fa-2x"})),r.a.createElement("div",{style:{margin:"20px",padding:"10px",color:"black",backgroundColor:"#FD974F",borderTop:"2px #57ABB3 solid",borderBottom:"2px #57ABB3 solid"}},"Select Your Avatar"),r.a.createElement("div",{style:{width:"80%",height:"60%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(sn,{option:"player_1",click:this.handleCharacterClick,selected:this.state.character,bgColor:"#FFE0C9"}),r.a.createElement(sn,{option:"player_2",click:this.handleCharacterClick,selected:this.state.character,bgColor:"#B0F8FF"})),r.a.createElement("div",{style:{width:"90%",height:"50px",margin:"10px",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("label",{htmlFor:"player",style:{marginRight:"20px",fontSize:ue(2),color:"black"}}," Avatar name "),r.a.createElement("div",{style:{width:"60%",fontFamily:"pixel"}},r.a.createElement("input",{onChange:this.handleNameChange,type:"text",name:"player",id:"player",style:{width:"100%",fontFamily:"pixel",fontSize:ue(2),color:"#57ABB3"},value:this.state.name}),r.a.createElement("div",{style:{width:"100%",fontSize:ue(1),color:"grey"}},3," to ",15," english alphabet characters"))),r.a.createElement("button",{onClick:this.validateAndSend,style:on({width:350,fontFamily:"pixel",fontSize:ue(2.5),margin:"50px",padding:"10px",backgroundColor:"#FD974F"},Oe(2,"#57ABB3",5))},"Start Journey"),r.a.createElement("p",{style:{color:"red",fontSize:ue(2)}},this.state.errmsg))}}]),t}(n.Component),pn=Object(l.b)(null,function(e){return{initPlayerInfo:function(t){var a=t.name,n=t.character;e(function(e,t){return{type:"SET_PLAYER_INFO",payload:{name:e,skinIdx:t}}}(a,n))},startNewJourney:function(){e({type:"START_NEW_JOURNEY"})}}})(cn),un=["assets/images/80/characters/baby/head.png","assets/images/80/characters/baby/sprite.png","assets/images/80/characters/boss/head.png","assets/images/80/characters/boss/sprite.png","assets/images/80/characters/bully_1/head.png","assets/images/80/characters/bully_1/sprite.png","assets/images/80/characters/cat_black/sprite.png","assets/images/80/characters/cat_orange/sprite.png","assets/images/80/characters/cat_white/sprite.png","assets/images/80/characters/chef/sprite.png","assets/images/80/characters/crush_1/head.png","assets/images/80/characters/crush_1/sprite.png","assets/images/80/characters/crush_2/head.png","assets/images/80/characters/crush_2/sprite.png","assets/images/80/characters/crush_3/head.png","assets/images/80/characters/crush_3/sprite.png","assets/images/80/characters/crush_4/head.png","assets/images/80/characters/crush_4/sprite.png","assets/images/80/characters/extras/player_tmp/head.png","assets/images/80/characters/extras/player_tmp/sprite_long.png","assets/images/80/characters/extras/player_tmp/sprite_tmp.png","assets/images/80/characters/extras/prof/head.png","assets/images/80/characters/extras/prof/professor_80.png","assets/images/80/characters/extras/prof/sprite.png","assets/images/80/characters/friend_1/head.png","assets/images/80/characters/friend_1/sprite.png","assets/images/80/characters/friend_2/head.png","assets/images/80/characters/friend_2/sprite.png","assets/images/80/characters/friend_3/head.png","assets/images/80/characters/friend_3/sprite.png","assets/images/80/characters/friend_4/head.png","assets/images/80/characters/friend_4/sprite.png","assets/images/80/characters/friend_5/head.png","assets/images/80/characters/friend_5/sprite.png","assets/images/80/characters/friend_6/head.png","assets/images/80/characters/friend_6/sprite.png","assets/images/80/characters/friend_7/head.png","assets/images/80/characters/friend_7/sprite.png","assets/images/80/characters/friend_8/head.png","assets/images/80/characters/friend_8/sprite.png","assets/images/80/characters/friend_9/head.png","assets/images/80/characters/friend_9/sprite.png","assets/images/80/characters/kid_1/head.png","assets/images/80/characters/kid_1/sprite.png","assets/images/80/characters/kid_2/head.png","assets/images/80/characters/kid_2/sprite.png","assets/images/80/characters/kid_3/head.png","assets/images/80/characters/kid_3/sprite.png","assets/images/80/characters/nurse/head.png","assets/images/80/characters/nurse/sprite.png","assets/images/80/characters/player_1/head.png","assets/images/80/characters/player_1/sprite.png","assets/images/80/characters/player_2/head.png","assets/images/80/characters/player_2/sprite.png","assets/images/80/characters/prof/head.png","assets/images/80/characters/prof/sprite.png","assets/images/80/characters/puppy_brown/sprite.png","assets/images/80/characters/puppy_white/head.png","assets/images/80/characters/puppy_white/sprite.png","assets/images/80/characters/tribe_1/head.png","assets/images/80/characters/tribe_1/sprite.png","assets/images/80/characters/tribe_2/head.png","assets/images/80/characters/tribe_2/sprite.png","assets/images/80/characters/tribe_3/head.png","assets/images/80/characters/tribe_3/sprite.png","assets/images/80/characters/tribe_4/head.png","assets/images/80/characters/tribe_4/sprite.png","assets/images/80/characters/tribe_5/head.png","assets/images/80/characters/tribe_5/sprite.png","assets/images/80/objectsAndProps/enter.png","assets/images/80/objectsAndProps/hen.png","assets/images/80/objectsAndProps/items.png","assets/images/80/objectsAndProps/leave.png","assets/images/80/objectsAndProps/loading.png","assets/images/80/objectsAndProps/PAPER.png","assets/images/80/objectsAndProps/portal.png","assets/images/80/objectsAndProps/ROCK.png","assets/images/80/objectsAndProps/SCISSORS.png","assets/images/80/objectsAndProps/title.png","assets/images/80/objectsAndProps/town.png","assets/images/80/objectsAndProps/playerselect/player_1.png","assets/images/80/objectsAndProps/playerselect/player_2.png"];function dn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var hn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={loading:!0,menu:!1,playerselect:!1,game:!1,loadgame:!1,screenDim:pe(window.screen.width,window.screen.height)},a.bg="".concat(Y,"/town.png"),a.handleStartNewGame=a.handleStartNewGame.bind(Object(h.a)(a)),a.handleLoadGame=a.handleLoadGame.bind(Object(h.a)(a)),a.handleStartJourney=a.handleStartJourney.bind(Object(h.a)(a)),a.handleBack=a.handleBack.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=function(){this.setState({loading:!1,menu:!0,playerselect:!1,game:!1,loadgame:!1})}.bind(this);!function(e,t){var a,n,r=0;for(a=0,n=e.length;a<n;a++)!function(a,n){a.onload=function(){++r>=e.length&&t&&t()},a.src=n}(new Image,e[a])}(un,e)}},{key:"handleStartNewGame",value:function(){Te(B),this.setState({menu:!1,playerselect:!0,game:!1,loadgame:!1})}},{key:"handleLoadGame",value:function(){Te(z),this.setState({menu:!1,playerselect:!1,game:!0,loadgame:!0})}},{key:"handleStartJourney",value:function(){Te(z),this.setState({menu:!1,playerselect:!1,game:!0,loadgame:!1})}},{key:"handleBack",value:function(){Te(B),this.setState({menu:!0,playerselect:!1,game:!1,loadgame:!1})}},{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dn(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({position:"relative",margin:"60px auto",border:"10px solid white",overflow:"hidden",width:this.state.screenDim[0],height:this.state.screenDim[1]},ke(this.bg,"black","cover")),t=null,a=null;return this.state.loading?(t=r.a.createElement(Zt,{msg:"Loading Resources"}),a=null):this.state.menu?(t=r.a.createElement("div",{style:e},r.a.createElement(nn,{width:this.state.screenDim[0],height:this.state.screenDim[1],startNewGame:this.handleStartNewGame,loadGame:this.handleLoadGame})),a=r.a.createElement(ta.a,{src:K,loop:!0,html5:!1,volume:.4})):this.state.playerselect?(t=r.a.createElement("div",{style:e},r.a.createElement(pn,{width:this.state.screenDim[0],height:this.state.screenDim[1],startJourney:this.handleStartJourney,handleBack:this.handleBack})),a=r.a.createElement(ta.a,{src:K,loop:!0,html5:!1,volume:.4})):this.state.game?(t=r.a.createElement(Qa,{width:this.state.screenDim[0],height:this.state.screenDim[1],loadgame:this.state.loadgame,handleBack:this.handleBack}),a=null):(t=r.a.createElement("div",{style:{fontFamily:"gameboy",fontSize:"20px",color:"white"}},"Unknown error. PLEASE RELOAD PAGE."),a=null),r.a.createElement(r.a.Fragment,null,t,a)}}]),t}(n.Component),mn=a(14);function bn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function yn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bn(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var fn={name:"PLAYER",skin:xt.player_1,position:[0,0],direction:w,spriteLocation:xt.player_1.DOWN,isAnimating:!1,nextPosition:[],walkIndex:0,frameInterval:0,interacting:!1,frozen:!1,nearbyNPC:null,nearbyGameObj:null,inBattle:!1,battle:{level:1,exp:0,won:0,lost:0,defeatedGangMembers:{}}},gn=function(e,t){var a=yn({},e);return null!==t&&(a[t]=1),a};function vn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function wn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vn(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var kn={name:null,tiles:[],width:0,height:0,isLoading:!0,src:null,audioSrc:null};function On(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function En(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?On(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):On(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var In={start:[0,0],end:[],width:0,height:0,viewportDims:[0,0],camera:[[0,0],[0,0]]};function An(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Tn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?An(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):An(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Dn={list:[],frozen:!1};function Sn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function jn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sn(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Pn=a(25),_n=a(26);function Nn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function xn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nn(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ln={isOpen:!1,position:"top",person1:{},person2:{},dialogIdx:0,speakerIdx:0,npcId:null,battleConversation:!1};function Rn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Cn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Rn(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Mn={isOpen:!1,HEALER:[],CURRENCY:[],EATABLE:[]};function Wn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Gn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wn(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Yn={savingState:!1,prevStates:[]};function Fn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Hn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fn(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fn(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Bn=function(e){for(var t=[],a=0;a<e;a++)t.push(new Array(e).fill(0));return t},Un=function(e){return 5+2*(e-1)},zn={isOpen:!1,inIntro:!0,inEnd:!1,currRound:0,player:{name:"Player",src:"",level:1,exp:0,lastMove:null,score:0,lives:5,maxLives:5,markovMatrix:Bn(3),initialStats:{level:1,exp:0}},npc:{id:null,name:"NPC",src:"",level:1,battlerType:null,lastMove:null,lives:5,maxLives:5,score:0},lastWinner:0,finalWinner:0,summary:"Use mouse/touch to select your move.",music:null},Jn=Object(mn.combineReducers)({player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn({},fn),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_NEW_JOURNEY":return yn({},fn);case y:return yn({},e,{position:t.payload.player.position,direction:we(e.direction,t.payload.player.direction),spriteLocation:e.skin[we(e.direction,t.payload.player.direction)],isAnimating:!1,nextPosition:[],walkIndex:0,interacting:!1,frozen:!1,nearbyNPC:null,nearbyGameObj:null,inBattle:!1,battle:yn({},t.payload.secondary?e.battle:fn.battle)});case"SET_PLAYER_INFO":return yn({},e,{name:t.payload.name,skin:xt[t.payload.skinIdx]});case"UPDATE_PLAYER_POSITION":return yn({},e,{position:t.payload.position,walkIndex:(e.walkIndex+1)%e.skin.walkSpriteCount});case"UPDATE_PLAYER_DIRECTION":return yn({},e,{direction:t.payload.direction,spriteLocation:e.skin[t.payload.direction]});case"UPDATE_PLAYER_ANIMATION":return yn({},e,{isAnimating:t.payload.isAnimating,nextPosition:t.payload.newpos,walkIndex:0});case"SET_DIALOG_STATUS":return yn({},e,{interacting:!0});case"RESET_DIALOG_STATUS":return yn({},e,{interacting:!1});case"SAVE_STATE_INITIATED":return yn({},e,{frozen:!0});case"SAVE_STATE_END":return yn({},e,{frozen:!1});case"RESTORE_STATE":return yn({},t.payload.state.player,{battle:yn({},e.battle),direction:e.direction,spriteLocation:e.skin[e.direction],frozen:!1});case"RESTORE_STATE_FROM_DISK":return yn({},t.payload.state.player,{frozen:!1});case"UPDATE_NEARBY_NPC":return yn({},e,{nearbyNPC:t.payload.npcId});case"UPDATE_NEARBY_GAMEOBJ":return yn({},e,{nearbyGameObj:t.payload.id});case"START_BATTLE":return yn({},e,{inBattle:!0});case"END_BATTLE":return yn({},e,{inBattle:!1,battle:{level:t.payload.player.newlevel,exp:t.payload.player.newexp,won:1===t.payload.battleWinner?e.battle.won+1:e.battle.won,lost:-1===t.payload.battleWinner?e.battle.lost+1:e.battle.lost,defeatedGangMembers:gn(e.battle.defeatedGangMembers,t.payload.player.gangMember)}});default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn({},kn),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_NEW_JOURNEY":return wn({},kn);case y:return wn({},e,{name:t.payload.name,tiles:t.payload.tiles,width:t.payload.width,height:t.payload.height,src:t.payload.src,audioSrc:t.payload.audioSrc,isLoading:!1});case"MAP_LOADING":return wn({},e,{isLoading:!0});case"RESTORE_STATE":case"RESTORE_STATE_FROM_DISK":return wn({},t.payload.state.map,{isLoading:!1});default:return e}},viewport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En({},In),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_VIEWPORT_DIMS":return En({},e,{viewportDims:t.payload.viewportDims,camera:t.payload.camera});case y:return En({},e,{start:t.payload.viewport.start,end:t.payload.viewport.end,width:t.payload.width,height:t.payload.height});case"UPDATE_MAP_ORIGIN":return En({},e,{start:t.payload.origin,end:[t.payload.origin[0]+e.width,t.payload.origin[1]+e.height]});case"RESTORE_STATE":case"RESTORE_STATE_FROM_DISK":return En({},t.payload.state.viewport);default:return e}},npc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tn({},Dn),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_NEW_JOURNEY":return Tn({},Dn);case y:return t.payload.npc?{frozen:!1,list:t.payload.npc.map(function(e){return Tn({},e,{position:he(e.pathArr[0],80),spriteLocation:e.skin[e.direction],defaultDirection:e.direction,isAnimating:!1,nextPosition:[],walkIndex:0,pathIdx:0,pathDir:1,lastUpdated:performance.now(),isWaiting:!1,interacting:!1,battle:"battle"in e&&e.battle,battlerType:"battlerType"in e?e.battlerType:null,inBattle:!1,battleFlag:"battleFlag"in e&&e.battleFlag,defeatedCount:"defeatedCount"in e?e.defeatedCount:0,talkFlag:!("talkFlag"in e)||e.talkFlag})})}:e;case"UPDATE_NPC_POSITION":return Tn({},e,{list:e.list.map(function(e){return e.id===t.payload.id?Tn({},e,{position:t.payload.position,walkIndex:(e.walkIndex+1)%e.skin.walkSpriteCount}):e})});case"UPDATE_NPC_DIRECTION":return Tn({},e,{list:e.list.map(function(e){return e.id===t.payload.id?Tn({},e,{direction:t.payload.direction,spriteLocation:e.skin[t.payload.direction]}):e})});case"UPDATE_NPC_ANIMATION":return Tn({},e,{list:e.list.map(function(e){if(e.id===t.payload.id){var a=e.pathIdx,n=e.pathDir,r=e.isWaiting,o=e.lastUpdated;return t.payload.isAnimating||(o=performance.now(),a+=n,1===n&&a===e.pathArr.length-1?(r=!0,n=-1):-1===n&&0===a&&(r=!0,n=1)),Tn({},e,{isAnimating:t.payload.isAnimating,nextPosition:t.payload.newpos,pathIdx:a,pathDir:n,isWaiting:r,lastUpdated:o})}return e})});case"RESET_NPC_WAITING":return Tn({},e,{list:e.list.map(function(e){return e.id===t.payload.id?Tn({},e,{isWaiting:!1}):e})});case"SET_DIALOG_STATUS":return Tn({},e,{list:e.list.map(function(e){return e.id===t.payload.npcId?Tn({},e,{interacting:!0}):e})});case"RESET_DIALOG_STATUS":return Tn({},e,{list:e.list.map(function(e){return e.id===t.payload.npcId?Tn({},e,{interacting:!1,talkFlag:!0}):e})});case"SAVE_STATE_INITIATED":return Tn({},e,{frozen:!0});case"SAVE_STATE_END":return Tn({},e,{frozen:!1});case"RESTORE_STATE":case"RESTORE_STATE_FROM_DISK":return{list:t.payload.state.npc.list.map(function(e){return Tn({},e,{isWaiting:!1})}),frozen:!1};case"START_BATTLE":return Tn({},e,{list:e.list.map(function(e){return e.id===t.payload.npc.id?Tn({},e,{inBattle:!0}):e})});case"END_BATTLE":return Tn({},e,{list:e.list.map(function(e){return e.id===t.payload.npcId?Tn({},e,{inBattle:!1,defeatedCount:1===t.payload.battleWinner?e.defeatedCount+1:e.defeatedCount,battleFlag:!0}):e})});default:return e}},gameobjects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_NEW_JOURNEY":return[];case y:var a=0;return t.payload.gameobjects?t.payload.gameobjects.map(function(e){return jn({},e,{id:a++,position:he(e.position,80)})}):e;case"ADD_OBJECT_TO_INVENTORY":return e.filter(function(e){return e.id!==t.payload.object.id});case"RESTORE_STATE":case"RESTORE_STATE_FROM_DISK":return t.payload.state.gameobjects.concat();default:return e}},dialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn({},Ln),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_NEW_JOURNEY":return xn({},Ln);case"SET_DIALOG_STATUS":return xn({},Ln,{isOpen:!0,position:t.payload.position,person1:t.payload.person1,person2:t.payload.person2,npcId:t.payload.npcId,dialogIdx:0,speakerIdx:0,battleConversation:t.payload.battleConversation});case"RESET_DIALOG_STATUS":return xn({},Ln);case"NEXT_DIALOG":return 0===e.speakerIdx?xn({},e,{speakerIdx:1}):xn({},e,{speakerIdx:0,dialogIdx:(e.dialogIdx+1)%e.person1.dialogs.length});default:return e}},inventory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn({},Mn),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_NEW_JOURNEY":return Cn({},Mn);case"TOGGLE_INVENTORY_DISPLAY":return Cn({},e,{isOpen:!e.isOpen});case"ADD_OBJECT_TO_INVENTORY":var a=Cn({},e);return a[t.payload.object.type.type]=e[t.payload.object.type.type].concat(t.payload.object),a;case"RESTORE_STATE_FROM_DISK":return Cn({},t.payload.state.inventory);default:return e}},statemanager:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn({},Yn),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_NEW_JOURNEY":return Gn({},Yn);case"SAVE_STATE_INITIATED":return Gn({},e,{savingState:!0});case"SAVE_STATE":var a=Object(b.a)(e.prevStates);return a.push(t.payload.state),Gn({},e,{prevStates:a,savingState:!1});case"SAVE_STATE_END":return Gn({},e,{savingState:!1});case"RESTORE_STATE":var n=Gn({},e,{prevStates:t.payload.prevStates,savingState:!1});return n[t.payload.mapinfo.map]={gameobjects:t.payload.mapinfo.gameobjects,npc:t.payload.mapinfo.npc},n;case"RESTORE_STATE_FROM_DISK":return Gn({},t.payload.state.statemanager,{savingState:!1});default:return e}},battle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn({},zn),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_NEW_JOURNEY":return Hn({},zn);case"START_BATTLE":return Hn({},zn,{isOpen:!0,player:Hn({},zn.player,{name:t.payload.player.name,src:t.payload.player.skin.src,level:t.payload.player.battle.level,exp:t.payload.player.battle.exp,lives:Un(t.payload.player.battle.level),maxLives:Un(t.payload.player.battle.level),markovMatrix:Bn(3),initialStats:{level:t.payload.player.battle.level,exp:t.payload.player.battle.exp}}),npc:Hn({},zn.npc,{id:t.payload.npc.id,name:t.payload.npc.name,src:t.payload.npc.skin.src,level:t.payload.npc.level,battlerType:t.payload.npc.battlerType,lives:Un(t.payload.npc.level),maxLives:Un(t.payload.npc.level)}),music:"battleMusic"in t.payload.npc?t.payload.npc.battleMusic:oe});case"END_BATTLE_INTRO":return Hn({},e,{inIntro:!1});case"SUBMIT_MOVES":var a=Object(b.a)(e.player.markovMatrix);return null!==e.player.lastMove&&(a[e.player.lastMove][t.payload.playermove]+=1),Hn({},e,{currRound:e.currRound+1,player:Hn({},e.player,{lastMove:t.payload.playermove,score:1===t.payload.winner?e.player.score+1:e.player.score,lives:-1===t.payload.winner?Math.max(e.player.lives-1,0):e.player.lives,markovMatrix:a}),npc:Hn({},e.npc,{lastMove:t.payload.npcmove,score:-1===t.payload.winner?e.npc.score+1:e.npc.score,lives:1===t.payload.winner?Math.max(e.npc.lives-1,0):e.npc.lives}),lastWinner:t.payload.winner,summary:t.payload.summary});case"END_BATTLE":return Hn({},e,{inEnd:!0,player:Hn({},e.player,{level:t.payload.player.newlevel,exp:t.payload.player.newexp}),finalWinner:t.payload.battleWinner});case"CLOSE_BATTLE":return Hn({},e,{isOpen:!1});default:return e}}}),$n=function(){return Object(mn.createStore)(Jn,Object(_n.composeWithDevTools)(Object(mn.applyMiddleware)(Pn.a)))};var Kn=function(){return r.a.createElement(l.a,{store:$n()},r.a.createElement(hn,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Kn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,1,2]]]);
//# sourceMappingURL=main.ce2bfefd.chunk.js.map